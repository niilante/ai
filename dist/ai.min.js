!function(e,t,n){"use strict";angular.module("ai.autoform",[]).provider("$autoform",function(){var e,t,n={prefix:"model",labels:!0,type:"text",addClass:!1,placeholders:!0,textareaAt:35,datetimeExp:/^(0?[1-9]|1[012])(:[0-5]\d) [APap][mM]$/,phoneExp:/^(?!.*911.*\d{4})((\+?1[\/ ]?)?(?![\(\. -]?555.*)\( ?[2-9][0-9]{2} ?\) ?|(\+?1[\.\/ -])?[2-9][0-9]{2}[\.\/ -]?)(?!555.?01..)([2-9][0-9]{2})[\.\/ -]?([0-9]{4})$/,intExp:/^\d+$/,emailExp:/^[\w-]+(\.[\w-]+)*@([a-z0-9-]+(\.[a-z0-9-]+)*?\.[a-z]{2,6}|(\d{1,3}\.){3}\d{1,3})(:\d{4})?$/};return t=function(e){n=angular.extend(n,e)},e=["$rootScope","$compile",function(e,t){function a(e){if(!e||!angular.isObject(e))return"";var t=[];return angular.forEach(e,function(e,n){"ngModel"===n&&(n="ng-model"),t.push(n+'="'+e+'"')}),t.join(" ")}function o(e){return"boolean"==typeof e?!0:!("true"!=e&&"false"!=e)}function r(e,t){return-1!==e.indexOf(t)}function i(e){for(var t="",n=0;e>n;)t+="	",n+=1;return t}function l(e){return e.replace(/^\s+/,"").replace(/\s+$/,"")}function s(e){return e.charAt(0).toUpperCase()+e.slice(1)}function c(e,t){return o(e)?"checkbox":t.phoneExp.test(e)?"tel":t.datetimeExp.test(e)?"datetime":t.intExp.test(e)?"number":t.emailExp.test(e)?"email":t.type}function u(e,t){var n=t,a="";return angular.forEach(e,function(e){var t='		<label class="checkbox-inline"><input {{ATTRS}}/> {{NAME}}</label>\n	</div>';a+=(i(3)+t.replace("{{ATTRS}}",l(n+' value="'+e+'"'))).replace("{{NAME}}",e)}),a}function d(o,d){function p(){var e="",n=[];angular.forEach(d.source,function(e,t){var o,p,g,m=f[t]=f[t]||{},h=s(t);o=m.attributes=m.attributes||{};var v=o.type||m.type;o.type=v,o.name=o.name||t,o.value=e||o.value||m.value,o.type=c(o.value,d),o.class=o.class||"",o.ngModel===!1||m.ngModel===!1?delete o.ngModel:o.ngModel=o.ngModel||m.ngModel||d.prefix?d.prefix+"."+t:t,m.values&&(angular.isString(m.values)&&(m.values=m.values.split(",")),!angular.isArray(m.values)&&angular.isObject(m.values)&&(o.type="select"),angular.isArray(m.values)&&(o.type="radio"===o.type?"radio":"select")),o.value&&angular.isString(o.value)&&o.value.length>d.textareaAt&&(o.type="textarea"),r(["textarea","checkbox","radio"],o.type)||(o.class=l(o.class.replace("form-control","")+" form-control")),p=o.value,r(["select","radio","textarea"],o.type)&&("radio"===o.type&&(m.checked=o.value),"select"===o.type&&(m.selected=o.value),"textarea"===o.type&&(m.content=o.value),delete o.value);var b=m.attributesStr=a(o);o.value=p;var y="";if(y+="checkbox"!==o.type?i(1)+'<div class="form-group">':i(1)+'<div class="checkbox">',"radio"!==o.type){var w=i(2)+"<label{{FOR}}>";w="checkbox"!==o.type?w.replace("{{FOR}}",' for="'+t+'"')+h+"</label>":w.replace("{{FOR}}",' class="checkbox"'),(d.labels||"checkbox"===o.type)&&(y+=w)}if(r(["select","textarea","radio"],o.type)){if("textarea"===o.type&&(g="<textarea {{ATTRS}}>{{CONTENT}}</textarea>",g=g.replace("{{CONTENT}}",o.value)),"select"===o.type){var $="",x=!angular.isArray(m.values);g="<select {{ATTRS}}>{{OPTIONS}}</select>",angular.forEach(m.values,function(e,t){var n=i(4)+"<option {{VALUE}}>{{TEXT}}</option>";n=x?n.replace("{{VALUE}}",t).replace("{{TEXT}}",e):n.replace("{{VALUE}}","").replace("{{TEXT}}",e),$+=n}),g=g.replace("{{OPTIONS}}",$)}"radio"===o.type&&(y+=u(m.values,b))}else g="<input {{ATTRS}}/>";g&&(g=i(3)+g.replace("{{ATTRS}}",b),y+=g),"checkbox"===o.type&&(y+=i(2)+h+"</label>"),y+=i(1)+"</div>",n.push(y)});var p=angular.element("<div></div>"),h=angular.element("<form></form>");return e=n.join("\n"),o.replaceWith(p),h.html(e),p.append(h),g.model=d.source,t(p.contents())(g),m}var g,f,m={};return d=d||{},m.scope=g=d.scope||e.$new(),m.options=g.options=d=angular.extend(angular.copy(n),d),f=d.elements||{},p()}return d}],{$get:e,$set:t}}).directive("aiAutoform",["$autoform",function(e){return{restrict:"AC",scope:!0,link:function(t,n,a){function o(){l=e(n,i)}var r,i,l;r={scope:t},i=angular.extend(r,t.$eval(a.aiAutoform||a.options)),i.source=i.source||t.$eval(a.source),o()}}}]),angular.module("ai.dropdown",[]).provider("$dropdown",function(){var e,a,o={text:"text",value:"value",display:!1,capitalize:!0,searchable:!0,placeholder:"Please Select",allowNull:!0,inline:!1,shadow:!0,template:"dropdown.tpl.html",itemTemplate:"dropdown-item.tpl.html",itemGroupTemplate:"dropdown-item-group.tpl.html",searchTemplate:"dropdown-search.tpl.html",addClass:!1,source:[],params:{},queryParam:"q",method:"get",groupKey:!1,groupDisplay:!1,selectClose:!0,selectClear:!1,closeClear:!0,blurClose:!0,onToggled:!1,onSelected:!1,onFilter:!1,onGroup:!1,onLoad:!1};return a=function(e){angular.extend(o,e)},e=["$templateCache","$q","$http","$compile","$parse","$filter",function(e,a,r,i,l,s){function c(e){return/<(br|basefont|hr|input|source|frame|param|area|meta|!--|col|link|option|base|img|wbr|!DOCTYPE).*?>|<(a|abbr|acronym|address|applet|article|aside|audio|b|bdi|bdo|big|blockquote|body|button|canvas|caption|center|cite|code|colgroup|command|datalist|dd|del|details|dfn|dialog|dir|div|dl|dt|em|embed|fieldset|figcaption|figure|font|footer|form|frameset|head|header|hgroup|h1|h2|h3|h4|h5|h6|html|i|iframe|ins|kbd|keygen|label|legend|li|map|mark|menu|meter|nav|noframes|noscript|object|ol|optgroup|output|p|pre|progress|q|rp|rt|ruby|s|samp|script|section|select|small|span|strike|strong|style|sub|summary|sup|table|tbody|td|textarea|tfoot|th|thead|time|title|tr|track|tt|u|ul|var|video).*?<\/\2>/.test(e)}function u(e){if(!e||!angular.isString(e))return!1;var t=e.split(".").pop();return"html"===t||"tpl"===t}function d(e){return e.replace(/^\s+/,"").replace(/\s+$/,"")}function p(e){return e instanceof HTMLElement?!0:!!(e&&e[0]&&e[0]instanceof HTMLElement)}function g(e,n,a){var o="querySelectorAll";return a&&(o="querySelector"),p(n)?n[o](e):angular.element(n||t)[o](e)}function f(t){if(c(t)&&!u(t)||angular.isString(t)&&0===t.length){var n=a.defer();return n.resolve(t),n.promise}return a.when(e.get(t)||r.get(t)).then(function(n){return n.data?(e.put(t,n.data),n.data):n})}function m(e,t){function c(e){if(!e)return[];var n,a=t.groupKey?{}:[];return angular.isString(e)&&(e=d(e).split(",")),t.allowNull&&angular.isArray(a)&&a.push(F),t.allowNull&&angular.isObject(a)&&(a._placeholder={key:"placeholder",display:!1,hidden:!1,items:[F]}),angular.forEach(e,function(o){if(angular.isString(o)&&(n=o=d(o),t.capitalize&&(n=o.charAt(0).toUpperCase()+o.slice(1)),a.push({text:o,value:o,display:n})),angular.isObject(o)){var r=o,i=t.display||t.text;if(r.text=o[t.text],r.text=r.text.charAt(0).toUpperCase()+r.text.slice(1),r.value=o[t.value]||r.text,r.display=o[i],t.capitalize&&(r.display=r.display.charAt(0).toUpperCase()+r.display.slice(1)),t.groupKey){var l=o[t.groupKey],s=o[t.groupDisplay||t.groupKey];t.capitalize&&(s=s.charAt(0).toUpperCase()+s.slice(1)),a[l]=a[l]||{key:l,display:s,hidden:!1},a[l].items=e.filter(function(e){return e[t.groupKey]===l})}else a.push(r)}}),a}function u(e,n){return e=e||{},n&&(e[t.queryParam]=n),e}function m(e){return e=e||t.source,angular.isString(e)&&-1!==e.indexOf("/")}function h(e){if(m()){var n=t.method,o=u(t.params,e);return a.when(r[n](t.source,o)).then(function(e){return c(e.data)})}var i=a.defer();return i.resolve(c(t.source)),i.promise}function v(e){if(A&&n!==e){var t=l(e)(T.$parent);t?A.attr("disabled","disabled"):A.removeAttr("disabled")}}function b(){angular.forEach(T.items,function(e){t.groupKey?e.items&&angular.forEach(e.items,function(e){e.active=!1}):e.active=!1})}function y(){q.q=T.q="",k(null,T.q)}function w(e){if(e){var n;return t.groupKey?(angular.forEach(T.items,function(t){n||(n=t.items.filter(function(t){return t.value===e})[0])}),n):n=T.items.filter(function(t){return t.value===e})[0]}}function $(n,a,o){var r={text:t.placeholder,value:"",display:t.placeholder};if(b(),t.selectClear||a&&(r=a,r.active=!0),q.selected=T.selected=r,t.model&&!o){var i=t.model;e.val(r.value),i.$setViewValue(r.value),i.$setTouched&&i.$setTouched(!0)}t.selectClose&&!o&&x(),y(),angular.isFunction(t.onSelected)&&t.onSelected.call(q,r,t.model,n)}function x(e){T.expanded=!T.expanded,q.expanded=T.expanded,!T.expanded&&t.closeClear&&y(),T.expanded&&E[0].focus(),angular.isFunction(t.onToggled)&&t.onToggled.call(q,T.expanded,e),t.searchable&&!T.expanded&&angular.isFunction(t.closeClear)&&(q.q=T.q=n)}function k(e,n){var a=T.source;angular.isFunction(t.onFilter)?a=t.onFilter.call(q,a,e):t.groupKey?angular.forEach(a,function(e){var t=s("filter")(e.items,n);e.hidden=!t.length}):a=s("filter")(T.source,n),q.items=T.items=a}function C(){var e=[];return q.selected=T.selected=F,q.expanded=T.expanded=!1,q.q=T.q=n,q.toggle=T.toggle=x,q.find=T.find=w,q.select=function(){var e=Array.prototype.slice.call(arguments,0);e=[null].concat(e),$.apply(this,e)},T.select=$,q.filter=function(){var e=Array.prototype.slice.call(arguments,0);e=[null].concat(e),k.apply(this,e)},T.filter=k,q.parseDisabled=T.parseDisabled=v,h().then(function(n){q.source=T.source=n,q.items=T.items=n,e.push(f(t.template||"")),e.push(f(t.searchTemplate||"")),e.push(t.groupKey?f(t.itemGroupTemplate||""):f(t.itemTemplate||"")),a.all(e).then(function(e){if(e&&e.length){var n=t.visibility,a="",o="";E='<div tabindex="-1"{{ATTRS}}></div>',n.ngShow&&(a+=' ng-show="'+n.ngShow+'"'),n.ngHide&&(a+=' ng-hide="'+n.ngHide+'"'),n.ngIf&&(a+=' ng-if="'+n.ngIf+'"'),E=E.replace("{{ATTRS}}",a),E=angular.element(i(E)(T.$parent)),E.addClass("ai-dropdown"),t.inline&&E.addClass("inline"),t.groupKey&&E.addClass("group"),t.addClass&&E.addClass(t.addClass);var r=t.before;r.element[r.method](E),E.html(e[0]),O=g(".items",E[0],!0),O=angular.element(O),t.shadow&&O.addClass("shadow"),t.searchable&&(o+=e[1]),o+=e[2],O.html(o),A=g("button.toggle",E[0],!0),A=angular.element(A),t.blurClose&&(S=g("input",E[0],!0),S&&(S=angular.element(S),S.on("blur",function(e){e.preventDefault(),!e.relatedTarget&&T.expanded&&T.$apply(function(){x(e)})})),E.on("blur",function(e){e.preventDefault(),!e.relatedTarget&&T.expanded&&T.$apply(function(){x(e)})})),n.disabled&&A.attr("disabled","disabled"),n.readonly&&A.attr("readonly","readonly"),n.ngDisabled&&v(n.ngDisabled),i(E.contents())(T),angular.isFunction(t.onLoad)&&t.onLoad.call(q)}})}),q}if((e||p(e))&&t.source){var T,E,A,S,O,F,q={};return t=t||{},q.scope=T=t.scope||$rootScope.$new(),q.options=T.options=t=angular.extend(angular.copy(o),t),F={text:t.placeholder,value:"",display:t.placeholder},C()}}var h='<button type="button" class="btn btn-warning toggle" ng-click="toggle()"><span class="selected" ng-bind="selected.display">Please Select</span><span class="caret" ng-class="{ down: !expanded, up: expanded }"></span></button><div class="wrapper"><div class="items" ng-show="expanded"></div></div>',v='<ul><li ng-repeat="item in items" ng-class="{ active: item.active }"><a ng-click="select($event, item)">{{item.display}}</a></li></ul>',b='<div><div ng-repeat="group in items" ng-if="!group.hidden"><h5 ng-bind="group.display" ng-show="group.display"></h5><ul><li ng-repeat="item in group.items" ng-class="{ active: item.active }"><a ng-click="select($event, item)">{{item.display}}</a></li></ul></div></div>',y='<input type="text" ng-model="q" ng-change="filter($event, q)" class="search form-control" placeholder="search"/>';return e.get(o.template)||e.put(o.template,h),e.get(o.itemTemplate)||e.put(o.itemTemplate,v),e.get(o.itemGroupTemplate)||e.put(o.itemGroupTemplate,b),e.get(o.searchTemplate)||e.put(o.searchTemplate,y),m}],{$get:e,$set:a}}).directive("aiDropdown",["$dropdown",function(e){function t(e,t){try{var n,a=e.parent();return angular.forEach(a.children(),function(e,a){var o=angular.element(e),r=o.attr("_ts_");t.toString()===r&&(n=a-1)}),e.removeAttr("_ts_"),0>n?{element:angular.element(e.parent()),method:"prepend"}:{element:angular.element(a.children().eq(n)),method:"after"}}catch(o){return!1}}return{restrict:"EAC",scope:!0,require:"^ngModel",link:function(a,o,r,i){function l(){o.attr("_ts_",g),c.before=t(o,g),c.visibility={disabled:!1,readonly:!1,ngHide:r.ngHide,ngShow:r.ngShow,ngIf:r.ngIf,ngDisabled:r.ngDisabled},r.disabled&&(c.visibility.disabled=!0),r.readonly&&(c.visibility.readonly=!0),c.input=o,o.css({display:"none"}),u=e(o,c),r.ngDisabled&&a.$watch(r.ngDisabled,function(e,t){e!==t&&a.parseDisabled(e)}),a.$watch(r.ngModel,function(e,t){if(!p&&n!==e||e!==t){var o=a.find(e);if(!o||o.value===a.selected.value)return;a.select(null,o,!0),p=!0}})}var s,c,u,d,p,g;return p=!1,g=(new Date).getTime(),s={scope:a},d=o.prop("tagName").toLowerCase(),"input"!==d?console.error("Invalid element, ai-dropdown requires an input element with ng-model."):(c=a.$eval(r.aiDropdown||r.options),c=angular.extend(s,c),c.source=c.source||a.$eval(r.source),c.model=i,n===c.source?console.error("ai-dropdown failed to initialize, invalid model."):void l())}}}]),angular.module("ai.flash.factory",[]).provider("$flash",function(){var e,a,o;return e={template:"flash.html",html:!0,errors:!0,excludeErrors:[401,403,404],errorName:"Unknown Exception",errorMessage:"An unknown exception has occurred, if the problem persists please contact the administrator.",stack:!1,multiple:!1,type:"info",typeError:"danger",animation:!1,timeout:3500,onError:n},o=function(t){e=angular.extend(e,t)},a=["$rootScope","$q","$templateCache","$http","$timeout","$compile",function(a,o,r,i,l,s){function c(e){return/<(br|basefont|hr|input|source|frame|param|area|meta|!--|col|link|option|base|img|wbr|!DOCTYPE).*?>|<(a|abbr|acronym|address|applet|article|aside|audio|b|bdi|bdo|big|blockquote|body|button|canvas|caption|center|cite|code|colgroup|command|datalist|dd|del|details|dfn|dialog|dir|div|dl|dt|em|embed|fieldset|figcaption|figure|font|footer|form|frameset|head|header|hgroup|h1|h2|h3|h4|h5|h6|html|i|iframe|ins|kbd|keygen|label|legend|li|map|mark|menu|meter|nav|noframes|noscript|object|ol|optgroup|output|p|pre|progress|q|rp|rt|ruby|s|samp|script|section|select|small|span|strike|strong|style|sub|summary|sup|table|tbody|td|textarea|tfoot|th|thead|time|title|tr|track|tt|u|ul|var|video).*?<\/\2>/.test(e)}function u(e){if(!e||!angular.isString(e))return!1;var t=e.split(".").pop();return"html"===t||"tpl"===t}function d(e,n){return angular.element((n||t).querySelectorAll(e))}function p(e){if(c(e)&&!u(e)||angular.isString(e)&&0===e.length){var t=o.defer();return t.resolve(e),t.promise}return o.when(r.get(e)||i.get(e)).then(function(t){return t.data?(r.put(e,t.data),t.data):t})}function g(e){var t,a;return t=e[0].style.overflow||n,a=e[0].style.overflowY||n,{x:t,y:a}}function f(e){if(n===e)return e;try{return JSON.parse(e)}catch(t){return e}}function m(){function t(e){clearTimeout(e.timeoutId),e.timeoutId=l(function(){e.focus?(clearTimeout(e.timeoutId),t(e)):(clearTimeout(e.timeoutId),r(e))},e.timeout)}function o(e,a,o,r){var i,l={title:n,type:y.type,focus:!1,show:!1,timeout:!1};o=f(o),r=f(r),(angular.isNumber(o)||"boolean"==typeof o)&&(r=o,o=n),y.multiple||(k=[]),angular.isObject(e)||(i={message:e,type:a,title:o,timeout:r}),i=angular.extend({},angular.copy(l),i),i.timeout===!0&&(i.timeout=y.timeout),i.message&&(k.push(i),v.flashes=w.flashes=k,$.css({overflow:"hidden"}),b.addClass("show"),i.timeout&&t(i))}function r(e){e&&k.length&&(k.splice(k.indexOf(e),1),k.length||($.css({overflow:x.x,"overflow-y":x.y}),b&&b.removeClass("show")))}function i(){k.length&&angular.forEach(k,function(e){e.shown===!0?r(e):e.shown=!0})}function c(e){e.focus=!0}function u(e){e.focus=!1}function m(){return v=v||{},v.add=o,v.remove=r,v.removeAll=i,v.flashes=k,v.init=h,v}function h(t,n){return y=n||{},b=t,v.scope=w=y.scope||a.$new(),v.options=w.options=y=angular.extend(e,y),$=d("body"),x=g($),p(y.template).then(function(e){e&&(b.html(e),s(b.contents())(w),b.addClass("ai-flash"))}),a.$on("$routeChangeStart",function(){v&&(i(),b&&b.removeClass("show"),$&&$.css({overflow:x.x,"overflow-y":x.y}),k=[])}),w.add=o,w.remove=r,w.removeAll=i,w.flashes=k,w.leave=u,w.enter=c,v}var b,y,w,$,x,k=[];return m()}function h(){return v||(v=new m),v}var v,b;return b='<div class="ai-flash-item" ng-repeat="flash in flashes" ng-mouseenter="enter(flash)" ng-mouseleave="leave(flash)" ng-class="flash.type"><a class="ai-flash-close" type="button" ng-click="remove(flash)">&times</a><div class="ai-flash-title" ng-if="flash.title" ng-bind-html="flash.title"></div><div class="ai-flash-message" ng-bind-html="flash.message"></div></div>',r.get(e.template)||r.put(e.template,b),h()}],{$set:o,$get:a}}).directive("aiFlash",["$flash",function(e){return{restrict:"EAC",scope:!0,link:function(t,n,a){function o(){r=e.init(n,l)}var r,i,l;i={scope:t},l=t.$eval(a.options)||t.$eval(a.aiFlash),l=angular.extend(i,l),o()}}}]),angular.module("ai.flash.interceptor",[]).factory("$flashInterceptor",["$q","$injector",function(e,t){return{responseError:function(n){function a(e){var t,n,a;t=e.name||o.options.errorName,n=e.message||o.options.errorMessage,a=e.stack||"",a&&o.options.stack&&(angular.isArray(a)&&(a=a.join("<br/>")),angular.isString(a)&&/\\n/g.test(a)&&(a=a.split("\n").join("<br/>")),n+="<br/><strong>Stack Trace:</strong><br/>"+a),n="<strong>Message:</strong> "+n,n=n.replace(/From previous event:/gi,"<strong>From previous event:</strong>"),o.add(n,o.options.typeError,t)}var o=t.get("$flash"),r=o.options.excludeErrors||[];if(n.status&&-1===r.indexOf(n.status))if(n.data){var i,l=n.data;o.options.onError?(i=o.options.onError.call(this,n),i===!0&&a(l),angular.isObject(i)&&a(i)):a(l)}else o.add(n.statusText,o.options.typeError||"flash-danger",n.status);return e.reject(n)}}}]).config(["$httpProvider",function(e){e.interceptors.push("$flashInterceptor")}]),angular.module("ai.flash",["ai.flash.factory","ai.flash.interceptor"]),angular.module("ai.modal",[]).provider("$modal",function(){var e,a,o={title:"Dialog",template:"modal.tpl.html",content:null,locals:{},show:!1,container:"body",animation:!1,backdropAnimation:!0,backdrop:!0,backdropCss:"rgba(51,51,51,0.7)",keyboard:!0,header:!0,footer:!0,closeIcon:"&times;",closeText:"Close",okText:"Ok",closeClass:"btn btn-default",okClass:"btn btn-primary",closeIconClass:"close",controller:angular.noop,controllerAs:null,scope:null,onCloseDestroy:!1,onClose:null,onShow:null,onOk:null,onDestroy:null,onBind:null};return a=function(e){angular.extend(o,e)},e=["$rootScope","$http","$q","$compile","$controller","$templateCache","$timeout","$document","$animate","$window","$injector",function(e,a,r,i,l,s,c,u,d,p,g){function f(e){return/<([A-Za-z][A-Za-z0-9]*)\b[^>]*>(.*?)<\/\1>/.test(e)}function m(e){var t=e.split(".").pop();return"html"===t}function h(){if(!$)return!1;try{return angular.module("ngSanitize"),!0}catch(e){return!1}}function v(e,n){return angular.element((n||t).querySelectorAll(e))}function b(g){function b(){if(!_.template)throw new Error("ai-modal requires a template but was not specified.");return U="modal.tpl.html"===_.template,$(_.template)}function y(){return _.content=_.content||"",$(_.content)}function $(e){var o;if(o=t.getElementById(e)||n,f(e)||!m(e)){var i=e;o&&(o=angular.element(o).css("display","none"),i=s.get(e)||angular.element("<div></div>").append(o).html(),s.put(e,i));var l=r.defer();return l.resolve(i),l.promise}return r.when(s.get(e)||a.get(e)).then(function(t){return t.data?(s.put(e,t.data),t.data):t})}function k(){var e,t,n;e={"in":null,out:null},t={"in":null,out:null},angular.isObject(_.animation)?e=_.animation:angular.isString(_.animation)?(n=_.animation.replace(/\s+/g,",").split(","),2===n.length&&(e={"in":n[0],out:n[1]})):_.animation===!0&&(e={"in":"fadeInDownBig",out:"fadeOutUpBig"}),_.animation=e,angular.isObject(_.backdropAnimation)?t=_.backdropAnimation:angular.isString(_.backdropAnimation)?(n=_.backdropAnimation.replace(/\s+/g,",").split(","),2===n.length&&(t={"in":n[0],out:n[1]})):_.backdropAnimation===!0&&(t={"in":"fadeIn",out:"fadeOut"}),_.backdropAnimation=t}function C(){return z.visibility}function T(){function e(){z.visibility=1,_.animation.in?(X&&Y(X),X=Z(function(){_.backdropAnimation.in&&d.setClass(H,_.backdropAnimation.in,_.backdropAnimation.out,function(){}),_.animation.in&&d.setClass(W,_.animation.in,_.animation.out,function(){E()})})):E()}var t=setInterval(function(){G||(clearInterval(t),z.$apply(function(){e()}))},10)}function E(){_.onShow&&angular.isFunction(_.onShow)&&_.onShow(I)}function A(e,t,n){if(e){if("static"===_.backdrop)return;var a=angular.element(e.target);if(!a.parent().hasClass("ai-modal-background")&&!a.hasClass("ai-modal-background"))return}B||(B=!0,_.animation.out&&!n?(_.backdropAnimation.out&&d.setClass(H,_.backdropAnimation.out,_.backdropAnimation.in,function(){}),_.animation.out?d.setClass(W,_.animation.out,_.animation.in,function(){S(t)}):S(t)):(z.visibility=0,B=!1,_.onCloseDestroy&&I.destroy(),S(t)))}function S(e){e?e():_.onClose&&angular.isFunction(_.onClose)&&_.onClose(I)}function O(){A(null,function(){angular.isFunction(_.onOk)&&_.onOk(I)})}function F(){"static"!==_.backdrop&&_.keyboard&&u.bind("keyup",function(e){var t=e.which||e.keyCode;27===t&&z.$apply(function(){A()})})}function q(){X&&Y(X),K.remove();var e=x.indexOf(I);-1!==e&&x.splice(e,1),_.onDestroy&&angular.isFunction(_.onDestroy)&&_.onDestroy(I,z),z.$destroy()}function j(e,t,n){var a,o={};if(angular.isObject(e)?(o=e,t&&"boolean"==typeof t&&(n=t)):e&&t&&(o[e]=t),z.isHtml&&o.content){var r=v(".ai-modal-content",W[0]);r&&r.html(o.content)}_=angular.extend(_,o),P(),a=_.show||!1,n?(K.remove(),V(a)):(N(),a&&I.show())}function D(){B&&c(function(){z.visibility=0,B=!1,X&&Y(X),_.onCloseDestroy&&I.destroy()})}function N(){i(K)(z)}function P(){var e=_.locals;if(e.visibility=0,e.title=_.title,e.header=_.header,e.footer=_.footer,e.ok=O,e.close=A,e.okText=_.okText,e.okClass=_.okClass,e.closeText=_.closeText,e.closeIcon=_.closeIcon,e.closeClass=_.closeClass,e.closeIconClass=_.closeIconClass,e.content=_.content,e)for(var t in e)e.hasOwnProperty(t)&&(z[t]=e[t])}function R(){I.show=T,I.close=A,I.ok=O,I.destroy=q,I.visibility=C,I.setOptions=j,I.compile=N,I.scope=z}function V(n){G=!0,k();var a='<div class="ai-modal-background" ng-cloak></div>',o={position:"fixed",top:0,left:0,right:0,bottom:0,"z-index":1040,overflow:"hidden"};"static"!==_.backdrop&&(a='<div class="ai-modal-background" ng-click="close($event)"></div>'),w||(w=v("body",t)),H=angular.element(a),_.backdropCss&&_.backdropCss!==!1&&(o.background=_.backdropCss),H.css(o),z=_.scope&&_.scope.$new()||e.$new(),z.options=_,z.visibility=0,L=l(_.controller,{$scope:z}),_.controllerAs&&(z[_.controllerAs]=L),M(n)}function M(e){P(),R();var n=b(),a=v(_.container,t),o=y();o.then(function(t){z.content=t,n.then(function(n){h()?n=n.replace(/ng-bind/g,"ng-bind-html"):console.log("Modal could not enable ng-bind-html. ngSanitize is not loaded."),W=angular.element(n);var o=h()?"ng-bind-html":"ng-bind",r="["+o+'="content"]',l=v(r,W[0]).addClass("ai-modal-content");t&&(h()?(l.removeAttr(o).html(t),z.isHtml=!0):l.text(t)),W.hasClass("modal")&&W.css({display:"block",overflow:"hidden"}),(_.animation.in||_.animation.out)&&(_.animation.in&&W.addClass("animated"),_.backdropAnimation.in&&H.addClass("animated"),W.bind("animationend webkitAnimationEnd oAnimationEnd",D)),K=H.append(W),K.attr("ng-show","visibility == 1"),F(),i(K)(z),a.prepend(K),x.push(I),z.$on("destroy",function(){q()}),_.onBind&&angular.isFunction(_.onBind)&&_.onBind(I),G=!1,e&&I.show()})})}var I,L,U,B,z,K,_,H,G,W,Z,Y,X;I=this,G=!1,Z=p.requestAnimationFrame||p.webkitRequestAnimationFrame||p.mozRequestAnimationFrame||function(e){p.setTimeout(e,1e3/60)},Y=p.cancelAnimationFrame||p.mozCancelAnimationFrame,_=angular.extend(o,g),V(_.show)}var y,w,$,x=[];return $=g.get("$sce"),y='<div class="modal"><div class="modal-dialog" ><div class="modal-content"><div class="modal-header" ng-show="header"><button type="button" ng-class="closeIconClass" aria-hidden="true" ng-click="close()" ng-bind="closeIcon"></button><h4 ng-show="title"class="modal-title" ng-bind="title"></h4></div><div class="modal-body" ng-bind="content"></div><div class="modal-footer" ng-show="footer"><button type="button" ng-class="closeClass" ng-click="close()" ng-bind="closeText"></button><button type="button" ng-class="okClass" ng-click="ok()" ng-bind="okText"></button></div></div></div></div>',s.get(o.template)||s.put(o.template,y),e.$on("$routeChangeStart",function(){angular.forEach(x,function(e){1===e.visibility()&&e.close()})}),b}],{$get:e,$set:a}}).directive("aiModal",["$modal",function(e){return{restrict:"AE",link:function(t,n,a){function o(){n.unbind("click"),n.on("click",function(){t.$apply(function(){i.show()})})}function r(){var r=a.aiModal||a.options;t.options=l=t.$eval(r),i||(i=new e(t.options)),t.options.cssClass&&n.addClass(t.options.cssClass),o()}var i,l;l={},t.$watch(a.aiModal,function(e,n){e!==n&&angular.isObject(e)&&(angular.extend(t.options,t.$eval(e)),i?(i.destroy(),i=null,r()):r())},!0),t.$on("destroy",function(){i.destroy()}),r()}}}]),angular.module("ai.passport.factory",[]).provider("$passport",function(){var e,t,a;return e={levels:{0:"*",1:"user",2:"manager",3:"admin",4:"superadmin"},401:!0,403:!0,paranoid:!1,delimiter:",",defaultUrl:"/",loginUrl:"/login",resetUrl:"/passport/reset",recoverUrl:"/passport/recover",loginAction:"post /api/passport/login",logoutAction:"/api/passport/logout",resetAction:"post /api/passport/reset",recoverAction:"post /api/passport/recover",onLoginSuccess:"/",onLoginFailed:"/login",onUnauthenticated:"/login",onUnauthorized:"/login"},a=function(t){e=angular.extend(e,t)},t=["$rootScope","$location","$http",function(t,a,o){function r(e){var t=e.split(" "),n={method:"get"};return n.path=t[0],t.length>1&&(n.method=t[0],n.path=t[1]),n}function i(e,t){var a=[];return e=e||[],angular.forEach(t,function(t){e[t]!==n&&a.push(e[t])}),a}function l(e){var t={};return angular.forEach(e,function(e,n){t[e]=parseFloat(n)}),t}function s(c){function d(t){t=t||{},e.levels=t.levels||e.levels,p.options=angular.extend(e,t),p.options.roles=l(p.options.levels)}var p={};return p.login=function(e){var t=r(p.options.loginAction);o[t.method](t.path,e).then(function(e){angular.extend(self,e.data),angular.isFunction(p.options.onLoginSuccess)?p.options.onLoginSuccess.call(this,e):a.path(p.options.onLoginSuccess)},function(e){angular.isFunction(p.options.onLoginFailed)?p.options.onLoginFailed.call(this,e):a.path(p.options.onLoginFailed)})},p.logout=function(){if(angular.isFunction(p.options.logoutAction))p.options.logoutAction.call(this);else{var e=r(p.options.logoutAction);o[e.method](e.path).then(function(){u=new s,t.Passport=u,a.path(p.options.defaultUrl)})}},p.recover=function(){},p.reset=function(){},p.hasRole=function(e){var t=p.roles||[];return angular.isString(e)&&(e=p.options.roles[e]||n),0===e?!0:-1!==t.indexOf(e)},p.hasAnyRole=function(e){var t=p.roles||[];return angular.isString(e)&&(e=e.split(p.options.delimiter),e=i(p.options.roles,e)),-1!==e.indexOf(0)?!0:e.some(function(e){return-1!==t.indexOf(e)})},p.minRole=function(e){var t,a=p.roles||[];return angular.isString(e)&&(e=p.options.roles[e]||n),t=Math.max.apply(Math,a),t>=e},p.maxRole=function(e){var t,a=p.roles||[];return angular.isString(e)&&(e=p.options.roles[e]||n),t=Math.max.apply(Math,a),e>t},p.init=function(e){d(e)},p.unauthenticated=function(){var e=p.options.onUnauthenticated;return angular.isFunction(e)?e.call(p):void a.path(e||p.options.loginUrl)},p.unauthorized=function(){var e=p.options.onUnauthorized;return angular.isFunction(e)?e.call(p):void a.path(e||p.options.loginUrl)},d(c),p}function c(){return u?u:new s}var u;return c()}],{$get:t,$set:a}}),angular.module("ai.passport.interceptor",[]).factory("$passportInterceptor",["$q","$injector",function(e,t){return{responseError:function(n){var a=t.get("$passport");return 401===n.status&&a.options[401]&&a.unauthenticated(),403===n.status&&a.options[403]&&a.unauthorized(),e.reject(n)}}}]).config(["$httpProvider",function(e){e.interceptors.push("$passportInterceptor")}]),angular.module("ai.passport.route",[]).run(["$rootScope","$location","$passport",function(e,t,a){e.$on("$routeChangeStart",function(e,t){var o,r,i={},l={};return t&&t.$$route&&(l=t.$$route,l.area&&(i=l.area)),o=l.access||i.access,a.options.paranoid&&o===n?a.unauthorized():void(o!==n&&(r=a.hasAnyRole("*"),r||a.unauthorized()))})}]),angular.module("ai.passport",["ai.passport.factory","ai.passport.interceptor","ai.passport.route"]),angular.module("ai.step",[]).provider("$step",function(){var e,t,a={key:"$id",start:0,title:"true","continue":!0,breadcrumb:!1,header:"step-header.tpl.html",content:"step-content.tpl.html",actions:"step-actions.tpl.html",showNumber:!0,showNext:!0,showPrev:!0,showSubmit:!0,headTo:!0,onBeforeChange:n,onChange:n,onSubmit:n,onLoad:n};return t=function(e){angular.extend(a,e)},e=["$rootScope","$templateCache","$compile","$http","$q","$location",function(e,t,o,r,i,l){function s(e){return/<(br|basefont|hr|input|source|frame|param|area|meta|!--|col|link|option|base|img|wbr|!DOCTYPE).*?>|<(a|abbr|acronym|address|applet|article|aside|audio|b|bdi|bdo|big|blockquote|body|button|canvas|caption|center|cite|code|colgroup|command|datalist|dd|del|details|dfn|dialog|dir|div|dl|dt|em|embed|fieldset|figcaption|figure|font|footer|form|frameset|head|header|hgroup|h1|h2|h3|h4|h5|h6|html|i|iframe|ins|kbd|keygen|label|legend|li|map|mark|menu|meter|nav|noframes|noscript|object|ol|optgroup|output|p|pre|progress|q|rp|rt|ruby|s|samp|script|section|select|small|span|strike|strong|style|sub|summary|sup|table|tbody|td|textarea|tfoot|th|thead|time|title|tr|track|tt|u|ul|var|video).*?<\/\2>/.test(e)}function c(e){if(!e||!angular.isString(e))return!1;var t=e.split(".").pop();return"html"===t||"tpl"===t}function u(e){return!!(e&&e[0]&&e[0]instanceof HTMLElement)}function d(e){if(s(e)&&!c(e)||angular.isString(e)&&0===e.length){var n=i.defer();return n.resolve(e),n.promise}return i.when(t.get(e)||r.get(e)).then(function(n){return n.data?(t.put(e,n.data),n.data):n})}function p(t,r){function p(e){return e.replace(/^\s+/,"").replace(/\s+$/,"")}function g(){angular.forEach(N,function(e){e.active=!1})}function f(e,t,n){if(angular.isNumber(e)&&!t)return N[e];t||(t=e,e=r.key);var a=N.filter(function(n){return n[e]?n[e]===t:!1});return a&&n?a[0]:a}function m(e){return e?N.indexOf(e):-1}function h(e,t){if(!e)return N.filter(function(e){return e.active===!0})[0];var n=f(e,t,!0);n&&n.enabled&&(g(),n.active=!0)}function v(e,t,n){function a(){if(o){if(!o.enabled&&r.continue){var e,a;if(t)for(e=l-1;e>=0;e--)a=N[e],a.enabled&&(o=a,l=e);else for(e=l;e<N.length;e++)a=N[e],a.enabled&&(o=a,l=e)}o.enabled&&(g(),o.active=!0,j=o),angular.isFunction(r.onChange)&&r.onChange.call(D,{previous:s,active:o},n)}}var o,l,s=h();angular.isNumber(e)&&(l=e,o=N[e]),angular.isObject(e)&&(l=m(e),o=e),angular.isFunction(r.onBeforeChange)&&i.when(r.onBeforeChange({active:s,next:o},n)).then(function(e){e&&a()})}function b(t,a){if(t||a){var o,i=N.length;angular.isObject(t)&&(a=t,t=n),o=!a,o&&(a={},a.content=t),(t||a[r.key])&&(a.enabled=a.enabled!==n?a.enabled:!0,a.active=i===r.start,a[r.key]=a[r.key]||t,a.content=a.content||t,r.title&&(a.title=a.title||"Step",a.title=a.title.charAt(0).toUpperCase()+a.title.slice(1)),a.$index=i,a.$number=i+1,s(a.content)||c(a.content)||(a.content="<span>"+a.content+"</span>"),R.push(d(a.content)),e.$broadcast("step:add",a),N.push(a))}}function y(e){var t=h();t&&v(t.$index+1,null,e)}function w(e){var t=h();t&&v(t.$index-1,!0,e)}function $(e,t){if(r.headTo){var n=N[t];!r.breadcrumb&&n.content?v(t,null,e):n&&n.href&&n.enabled&&l.path(n.href)}}function x(e){angular.isFunction(r.onSubmit)&&r.onSubmit.call(D,{active:h()},e)}function k(e,t){var n,a=f(e,t,!0);return a=a||h(),n=m(a),0===n}function C(e,t){var n,a=f(e,t,!0);return a=a||h(),n=m(a),N.length-1===n}function T(e,t){var n=f(e,t,!0);return!(!n||n.active!==!0)}function E(e,t){var n=f(e,t,!0);return!(!n||n.enabled!==!0)}function A(){var e=m(h())+1,t=N[e];return t&&t.enabled?!0:void 0}function S(){var e=m(h())-1,t=N[e];return t&&t.enabled?!0:void 0}function O(){if(F){if(angular.isString(F)&&(F=p(F).split(",")),angular.isObject(F)){var e=[];angular.forEach(F,function(t,n){if(angular.isObject(t)||angular.isString(t))if(angular.isString(t)){var a={};a[r.key]=n,a.content=t,e.push(a)
}else t[r.key]=t[r.key]||n,r.title&&(t.title=t.title||n),e.push(t)})}angular.forEach(F,function(e){angular.isString(e)&&(e=p(e)),b(e)})}if(!t)return callback();var n,a;return n="",a='<div ng-show="isActive({{INDEX}})">{{CONTENT}}</div>',r.header&&P.push(d(r.header||"")),r.content&&P.push(d(r.content||"")),r.actions&&P.push(d(r.actions||"")),P=P.concat(R),P=i.all(P),P.then(function(e){if(e){for(var r={header:e[0],content:e[1],actions:e[2],steps:[]},i=3;i<e.length;i++)r.steps.push(e[i]);if(n+=r.header,r.content&&r.content.length){var l,s=angular.element(r.content),c="";angular.forEach(r.steps,function(e,t){c+=a.replace("{{INDEX}}",t).replace("{{CONTENT}}",e)}),s.html(c),l=angular.element("<div/>").append(s).clone().html(),n+=l}n+=r.actions,t.html(n),o(t.contents())(q)}}),D.find=q.find=f,D.active=q.active=h,D.add=q.add=b,D.to=q.to=v,D.next=q.next=y,D.prev=q.prev=w,D.submit=q.submit=x,q.headTo=$,D.isFirst=q.isFirst=k,D.isLast=q.isLast=C,D.isActive=q.isActive=T,D.isEnabled=q.isEnabled=E,D.hasNext=q.hasNext=A,D.hasPrev=q.hasPrev=S,D.steps=q.steps=N,angular.isFunction(r.onLoad)&&r.onLoad(D),D}var F,q,j,D={},N=[],P=[],R=[];return!u(t)&&angular.isObject(t)&&(r=t,t=n),r=r||{},D.scope=q=r.scope||e.$new(),D.options=q.options=r=angular.extend(a,r),r.steps&&(F=r.steps,delete r.steps),O()}var g,f,m;return g='<div class="ai-step-header" ng-show="steps.length"><ul><li ng-click="headTo($event, $index)" ng-repeat="step in steps" ng-class="{ active: step.active, disabled: !step.enabled, clickable: options.headTo && step.enabled, nonum: !options.showNumber }"><span class="title">{{step.title}}</span><span class="number">{{step.$number}}</span></li></ul></div>',f='<div ng-if="!options.breadcrumb" class="ai-step-content" ng-show="steps.length"><div ng-show="isActive($index)" ng-repeat="step in steps" ng-bind-html="step.content"></div></div>',m='<div ng-if="!options.breadcrumb" class="ai-step-actions" ng-show="steps.length"><hr/><button ng-show="options.showPrev" ng-disabled="isFirst()" class="btn btn-warning" ng-click="prev($event)">Previous</button> <button ng-show="options.showNext" ng-disabled="isLast()" class="btn btn-primary" ng-click="next($event)">Next</button> <button ng-show="isLast() && options.showSubmit" class="btn btn-success submit" ng-click="submit($event)">Submit</button></div>',t.get(a.header)||t.put(a.header,g),t.get(a.content)||t.put(a.content,f),t.get(a.actions)||t.put(a.actions,m),p}],{$get:e,$set:t}}).directive("aiStep",["$step",function(e){return{restrict:"EAC",scope:!0,link:function(t,n,a){function o(){l=e(n,i)}var r,i,l;r={scope:t},i=t.$eval(a.aiStep||a.options),i=angular.extend(r,i),o()}}}]),angular.module("ai.storage",[]).provider("$storage",function(){function a(n){return n?navigator.cookieEnabled||"cookie"in t&&(t.cookie.length>0||(t.cookie="test").indexOf.call(t.cookie,"test")>-1):"localStorage"in e&&null!==e.localStorage}function o(e,t,n,a){if(!t)return n;n=n||null,a=a||0;var r=t.length;for(var i in e)if(e.hasOwnProperty(i)&&i===t[a])return r-1>a&&angular.isObject(e[i])?(a+=1,o(e[i],t,n,a)||n):e[i]||n;return n}var r,i,l={ns:"app",cookiePath:"/",cookieExpiry:30};return i=function(e){l=angular.extend(l,e)},r=[function(){function e(e){function r(){if(!w)return new Error("Keys can only be obtained when localStorage is available.");var e=[];for(var t in localStorage)if(localStorage.hasOwnProperty(t)&&t.substr(0,b)===h)try{e.push(t.substr(b))}catch(n){return n}return e}function i(e,t){if(!w)return p(e,t);typeof t===n&&(t=null);try{(angular.isObject(t)||angular.isArray(t))&&(t=angular.toJson(t)),localStorage.setItem(h+e,t)}catch(a){return p(e,t)}}function s(e,t){var n;return t?c(e,t):w?(n=localStorage.getItem(h+e),n?"{"===n.charAt(0)||"["===n.charAt(0)?angular.fromJson(n):n:null):g(e)}function c(e,t){var n,a;return w?(n=s(e),a=angular.isObject(n)||!1,n?a?o(n,t):n:new Error("Invalid operation, storage item must be an object.")):new Error("Cannot get by property, localStorage must be enabled.")}function u(e){if(!w)return f(e);try{localStorage.removeItem(h+e)}catch(t){return f(e)}}function d(){if(!w)return m();for(var e in localStorage)if(localStorage.hasOwnProperty(e)&&e.substr(0,b)===h)try{u(e.substr(b))}catch(t){return m()}}function p(a,o){if(typeof o===n)return!1;if(!y)return new Error("Cookies are not supported by this browser.");try{var r="",i=new Date;null===o&&(v.expiry=-1,o=""),v.expiry&&(i.setTime(i.getTime()+24*e.cookieExpiry*60*60*1e3),r="; expires="+i.toGMTString()),a&&(t.cookie=h+a+"="+encodeURIComponent(o)+r+"; path="+e.cookiePath)}catch(l){throw l}}function g(e){if(!y)return new Error("Cookies are not supported by this browser.");for(var n=t.cookie.split(";"),a=0;a<n.length;a++){for(var o=n[a];" "===o.charAt(0);)o=o.substring(1,o.length);if(0===o.indexOf(h+e+"="))return decodeURIComponent(o.substring(h.length+e.length+1,o.length))}return null}function f(e){p(e,null)}function m(){for(var e,n=null,a=t.cookie.split(";"),o=0;o<a.length;o++){for(n=a[o];" "===n.charAt(0);)n=n.substring(1,n.length);return e=n.substring(b,n.indexOf("=")),f(e)}}var h,v,b,y,w,$={};return e=angular.extend(l,e),h=e.ns+".",b=h.length,w=a(),y=a(!0),w||y?($.supports={localStorage:a(),cookies:a(!0)},$.get=s,$.set=i,$.delete=u,$.clear=d,$.storage={keys:r,supported:w},$.cookie={get:g,set:p,"delete":f,clear:m,supported:y},$):new Error("Storage Factory requires localStorage browser support or cookies must be enabled.")}return e}],{$set:i,$get:r}}),angular.module("ai.tab",[]).provider("$tab",function(){var e,t,n={};return t=function(e,t){2===arguments.length&&(n[e]=t),1===arguments.length&&angular.isObject(e)&&(n=angular.extend(n,e))},e=[function(){function e(e,t){var a,o={};return t=t||{},o.scope=a=t.scope||$rootScope.$new(),o.options=a.options=t=angular.extend(angular.copy(n),t),o}return e}],{$get:e,$set:t}}).directive("aiTab",["$tab",function(e){return{restrict:"AC",scope:!0,link:function(t,n,a){function o(){l=e(n,i)}var r,i,l;r={scope:t},i=t.$eval(a.aiTab||a.options),i=angular.extend(r,i),o()}}}]),angular.module("ai.table",["ngSanitize"]).provider("$table",[function(){var e,a,o;return e={auto:!0,uppercase:!0,columns:{},source:[],server:!1,serverFilter:!1,method:"get",config:{},params:{},mapParams:!1,batch:50,loader:!0,loaderDelay:100,actions:!0,changeable:!0,sortable:!0,searchable:!0,selectable:!1,selectableAll:!1,deleteable:!1,editable:!1,exportable:!1,orderable:!1,options:!0,orderBy:n,pager:!0,display:10,pages:5,counts:!0,pagination:!0,firstLast:!0,"goto":!0,actionsTemplate:"table-actions.tpl.html",tableTemplate:"table.tpl.html",pagerTemplate:"table-pager.tpl.html",nodataTemplate:"table-nodata.tpl.html",loaderTemplate:"table-loader.tpl.html",bootstrap:!0,bordered:!0,striped:!0,hover:!1,condensed:!1,responsive:!0,onSelected:n,onDeleted:n,onLoad:n,onReset:n,beforeFilter:n,beforeUpdate:n,beforeDelete:n,beforeDownload:n},o=function(t){e=angular.extend(e,t)},a=["$rootScope","$http","$q","$templateCache","$compile","$filter","$timeout",function(a,o,r,i,l,s,c){function u(e){return/<(br|basefont|hr|input|source|frame|param|area|meta|!--|col|link|option|base|img|wbr|!DOCTYPE).*?>|<(a|abbr|acronym|address|applet|article|aside|audio|b|bdi|bdo|big|blockquote|body|button|canvas|caption|center|cite|code|colgroup|command|datalist|dd|del|details|dfn|dialog|dir|div|dl|dt|em|embed|fieldset|figcaption|figure|font|footer|form|frameset|head|header|hgroup|h1|h2|h3|h4|h5|h6|html|i|iframe|ins|kbd|keygen|label|legend|li|map|mark|menu|meter|nav|noframes|noscript|object|ol|optgroup|output|p|pre|progress|q|rp|rt|ruby|s|samp|script|section|select|small|span|strike|strong|style|sub|summary|sup|table|tbody|td|textarea|tfoot|th|thead|time|title|tr|track|tt|u|ul|var|video).*?<\/\2>/.test(e)}function d(e){var t=e.split(".").pop();return"html"===t||"tpl"===t}function p(e,n){return angular.element((n||t).querySelectorAll(e))}function g(e,t,n){e=+e||1,n=n||1,null===t?(t=e,e=0):t=+t||0;for(var a=-1,o=Math.max(Math.ceil((t-e)/(n||1)),0),r=new Array(o);++a<o;)r[a]=e,e+=n;return r}function f(e,t,n){var a=1;return t=t||{},Object.keys(e).forEach(function(o){angular.isObject(e[o])?(a+=1,n&&n>a&&f(e[o],t)):t[o]?(t[t[o]]=e[o],delete t[o]):t[o]=e[o]}),t}function m(){var e=t.createElement("div");return"draggable"in e||"ondragstart"in e&&"ondrop"in e}function h(e){try{return-1!==JSON.stringify(e).indexOf("{")}catch(t){return!1}}function v(v,b){function y(e){if(u(e)&&!d(e)){var t=r.defer();return t.resolve(e),t.promise}return r.when(i.get(e)||o.get(e)).then(function(t){return t.data?(i.put(e,t.data),t.data):t})}function w(e){var t=Object.keys(ot).length-1;angular.forEach(b.columns,function(n,a){n.headerTemplate&&(e.push(y(n.headerTemplate)),ot[a]={index:t+=1,isHeader:!0}),n.cellTemplate&&(e.push(y(n.cellTemplate)),ot[a]={index:t+=1})})}function $(e){var t,n;return t=[],b.bootstrap?(b.bordered||t.push("table-bordered"),b.hover||t.push("table-hover"),b.condensed||t.push("table-condensed"),b.striped||t.push("table-striped"),b.responsive||t.push("table-responsive")):t=["btn","btn-default","row","row-fluid","col-sm-8","col-sm-6","col-sm-4","span-8","span-6","span-4","span-12","pagination","form-control","table-striped","table-bordered","table-hover","table-condensed","table-responsive","table"],n=new RegExp("("+t.join("|")+")","g"),e=e.replace(n,"")}function x(){var e,t,a=[],i={method:b.method,params:b.params||{}};if(b.server){var l,s,c,u=2*at.display,d=at.orderBy||{},p=at.page||1,g=at.source.rows.length;u>b.batch&&(b.batch=u),l=(p-1)*at.display+b.batch,s=l-g,c=b.batch&&s>b.batch?s:b.batch||n,t={limit:c,skip:g,where:at.q||n,sort:d.column?d.column+d.reverse?" desc":" asc":n},b.mapParams&&(t=f(t,b.mapParams||{}),angular.extend(i.params,t))}if(angular.isArray(b.source)||angular.isObject(b.source))return angular.isArray(b.source)?a=b.source:angular.forEach(b.source,function(e,t){angular.isObject(e)&&(e._key=t),a.push(e)}),e=r.defer(),e.resolve(a),e.promise;if(i=angular.extend(i,b.config),i.url=b.source,b.onLoad&&angular.isFunction(b.onLoad)){var m,h,v,y=b.onLoad(i)||i;m=b.mapParams.where||"where",h=b.mapParams.sort||"sort",v=b.mapParams.limit||"limit",i=angular.extend(i,y),at.q=i.params[m],b.limit=i.params[v],b.orderBy=i.params[h]}return o(i).then(function(e){return e.data||[]},function(){it=!0,at.loading=!1})}function k(e,t){it=!1,t=t||!1,b.loader&&(it=!0,c(function(){it&&(rt&&rt.addClass("loading"),at.loading=!0)},b.loaderDelay||0)),x().then(function(n){var a,o;a=n?n.data||n:[],a=T(a),t&&b.server&&b.batch?at.source.rows.push.apply(at.source.rows,a.rows):at.source=a,at.filtered=at.source.rows,at.columns=at.source.columns,o=n.total||at.source.rows.length,at.total=o,it=!1,at.loading=!1,rt&&rt.removeClass("loading"),angular.isFunction(e)?e():(F(),et())})}function C(e){function t(e){for(var t=e.concat(),n=0;n<t.length;++n)for(var a=n+1;a<t.length;++a)t[n]===t[a]&&t.splice(a--,1);return t}if(!e)return[];var n=Object.keys(e),a=Object.keys(b.columns);return t(a.concat(n))}function T(e){var t,a=[],o=e;return t=C(e[0]),t.edits=n,b.columns.edits={excluded:!0},b.columns.$$hashKey={excluded:!0},angular.forEach(t,function(e){var t,o=b.columns[e],r={sortable:!0,filter:!1,headerClass:!1,cellClass:!1,headerTemplate:!1,cellTemplate:!1,draggable:!1,resolve:n};(b.auto||o)&&(o=o===!1?{excluded:!0}:o,o=angular.extend(r,o),o.map=o.map||e,o.label=""===o.label||null===o.label?"":o.label||e,o.sortable=o.sortable===!1?!1:b.sortable?!0:!1,o.accessible=o.accessible===!1?!1:o.accessible===n?!0:o.accessible,t=ot[e]||n,o.headerTemplate&&t&&t.isHeader&&(o.headerTemplate=t.template),o.cellTemplate&&t&&!t.isHeader&&(o.cellTemplate=t.template),a.push(o))}),{columns:a,rows:o}}function E(){A()}function A(e){function t(){b.beforeFilter&&angular.isFunction(b.beforeFilter)?r.when(b.beforeFilter(at.source.rows,e)).then(function(e){at.filtered=angular.isArray(e)?s("orderBy")(e,a):s("filter")(s("orderBy")(at.source.rows,a),e),at.page=1,et(1)}):b.serverFilter||(at.filtered=s("filter")(s("orderBy")(at.source.rows,a),e),at.page=1,et(1))}var a=at.orderBy;return at.editing?void(at.q=n):(e=e||at.q,void(b.server&&b.batch&&b.serverFilter?k(function(){at.q=n,t()}):t()))}function S(){at.editing||(at.q=n,at.page=1,q(!1),b.onReset&&angular.isFunction(b.onReset)&&b.onReset(),A())}function O(e){var t=at.orderBy&&angular.isString(at.orderBy)?at.orderBy.replace("-",""):n,a=at.orderBy;b.sortable&&e.sortable!==!1&&(e=angular.isObject(e)?e.map:e,a=a&&t===e?"-"===a.charAt(0)?a.replace("-",""):"-"+a:e,at.orderBy=a,F())}function F(e,t){at.editing||(t=t||at.filtered,e=e||at.orderBy,at.filtered=s("orderBy")(t,e))}function q(e){return at.editing?void 0:(at.selectAll=e,at.selected=[],angular.forEach(at.filtered,function(t){t.selected=e,e===!0&&at.selected.push(t)}),at.selected)}function j(e){var t=at.display*e;at.editing||1===at.indices.filtered||e>at.indices.max||(at.page=e,at.gotoPage=n,M(e)?I(e):at.source.rows.length<t||e>at.indices.filtered?k(et,!0):et(e))}function D(e,t){var n=e.which||e.keyCode;13===n&&j(t)}function N(e){R(e)&&j(e-1)}function P(e){V(e)&&j(e+1)}function R(e){return e=e||at.page,e-1>0}function V(e){var t=Math.ceil(at.filtered.length/b.display);return e=e||at.page,t-1>e-1}function M(e){var t=at.indices.filtered,n=at.display*e;return at.source.rows.length<n||e>t?!1:-1!==at.pages.indexOf(e)}function I(e){var t,n;e=e||at.page,t=1===e?0:(e-1)*at.display,n=t+at.display,at.filteredRows={start:t,end:n}}function L(e){at.editing||(at.display=parseInt(e),at.page=1,k(et,!0))}function U(e){var t,a;if(!b.sortable||!e.sortable)return"";if(a=angular.copy(at.orderBy)||n,!angular.isFunction(a)){if(angular.isArray(a)){var o=!1;angular.forEach(a,function(n){o||(t=n.replace("-",""),t===e.map&&(a=n,o=!0))})}else t=a?a.replace("-",""):n;return a&&e.map===t?"-"===a.charAt(0)?"descending":"ascending":"unsorted"}}function B(e,t,n){var a,o={},r=[],i=["onSelect","onBind","onLoad","onDelete","onReset"];for(a in e)e.hasOwnProperty(a)&&t.test(a)&&e[a]&&-1===i.indexOf(a)&&(r.push(a),o[a.toLowerCase().replace("on","")]={key:a,callback:e[a]});return n?o:r}function z(e,t,a){if(!at.editing&&(angular.isNumber(t)&&(t=at.source.rows[t]||n),t&&(at.selected=[],"multi"!==at.selectable?(angular.forEach(at.filtered,function(e,t){t!==a&&(e.selected=!1)}),t.selected=!t.selected,t.selected&&at.selected.push(t)):(t.selected=!t.selected,angular.forEach(at.filtered,function(e,n){n!==a&&(t.active=!1),e.selected&&at.selected.push(e)}),t.active=!t.active)),b.onSelected&&angular.isFunction(b.onSelected))){var o=at.selected;b.multiple||(o=at.selected[0]),b.onSelected(t||n,at.selected,e)}}function K(e,t,n){if(!at.editing&&at.selectable&&(e||0===e.button||1===e.button)){var a=angular.element(e.target);return a.hasClass("ai-table-cell")||a.hasClass("ai-table-cell-view")?void z(e,t,n):!1}}function _(e){function t(){at.source.rows.splice(at.source.rows.indexOf(e),1),at.selected&&at.selected.length&&-1!==at.selected.indexOf(e)&&at.selected.splice(at.selected.indexOf(e),1),at.filtered=at.source.rows,at.q=n,et()}at.editing||(angular.isNumber(e)&&(e=at.source.rows[e]||n),e&&(b.beforeDelete&&angular.isFunction(b.beforeDelete)?r.when(b.beforeDelete(e,t)).then(function(e){e&&t(!0)}):t()))}function H(e,t){return angular.isFunction(e)&&at.source.rows.filter(e),angular.isObject(e)?at.source.rows.filter(function(t){return Object.keys(e).every(function(n){return new RegExp(e[n]).test(t[n])})}):e&&t?at.source.rows.filter(function(e){return Object.keys(e).every(function(n){return new RegExp(t).test(e[n])})}):[]}function G(e){function t(){e=angular.extend(e,e.edits),e.edits=n,at.editing=n}var a,o,i,l;if(e){if(at.selected.length)return alert("You cannot edit rows while selecting."),!1;angular.isNumber(e)&&(e=at.source.rows[e]||n),i=at.source.rows.indexOf(e),at.editing&&(l=at.source.rows.indexOf(at.editing),l!==i&&(at.editing.edits=n,at.editing=n)),e&&(a=at.source.columns.filter(function(e){return!!e.editType})||[],a.length?e.edits?b.beforeUpdate&&angular.isFunction(b.beforeUpdate)?r.when(b.beforeUpdate(e.edits)).then(function(e){e?t(e):W()}):t():(o=f(e),e.edits=o,at.editing=e):alert("No columns are editable."))}}function W(){at.editing&&(at.editing.edits=n,at.editing=n)}function Z(){b.onBind&&angular.isFunction(b.onBind)&&b.onBind(self)}function Y(e){function t(){e&&angular.isFunction(e)&&lt&&(clearInterval(n),e.call(self))}var n;n=setInterval(t,50)}function X(){function e(e,r){e&&e.length&&(r=r||"download.csv",n=Object.keys(e[0]),n.splice(n.indexOf("$$hashKey"),1),i+=n.join(",")+"\n",angular.forEach(e,function(e){var t,a;t="",a=1,angular.forEach(e,function(e,t){"$$hashKey"!==t&&(i+=a<n.length?e+",":e+"\n"),a+=1})}),o=encodeURI(i),a=t.createElement("a"),a.setAttribute("href",o),a.setAttribute("download",r),a.click())}var n,a,o,i="data:text/csv;charset=utf-8,";b.beforeDownload&&angular.isFunction(b.beforeDownload)?r.when(b.beforeDownload(at.filtered,"download.csv")).then(function(t){t&&angular.isObject(t)&&e(t.filtered,t.fileName)}):e(at.filtered,"download.csv")}function J(){at.source={columns:[],rows:[]},at.columns=[],at.filtered=[],at.orderBy=b.orderBy,at.uppercase=b.uppercase,at.changeDisplay=L,at.displayed=[5,10,25,50],at.display=b.display,at.selected=[],at.selectable=b.selectable,at.selectableAll=b.selectableAll,at.changeable=b.changeable,at.selectAll=!1,at.selectAllRows=q,at.selectTableRow=K,at.deleteRow=_,at.editRow=G,at.cancelEdit=W,at.editing=n,at.draggable=m(),at.orderable=b.orderable,at.exportable=b.exportable,at.exportURI=X,at.actions=b.actions,at.searchable=b.searchable,at.options=b.options,at.filter=E,at.reset=S,at.q=n,at.sort=O,at.sortClass=U,at.page=1,at.pager=b.pager,at.pages=[],at.pageTo=j,at.pageToKeyUp=D,at.pagePrev=N,at.pageNext=P,at.hasNext=V,at.hasPrev=R,at.counts=b.counts,at.pagination=b.pagination,at.firstLast=b.firstLast,at.goto=b.goto,at.gotoPage=n,at.options=b,at.loading=!1,at.eventMap=B(b,/^on.+$/i,!0),at.bind=k}function Q(){nt.getSource=function(){return at.source},nt.getSelected=function(){return at.selected},nt.getEditing=function(){return at.editing},nt.getOrderBy=function(){return at.orderBy},nt.setRows=function(e){var t=T(e);at.source.rows=t.rows,at.filtered=t.rows,et(1)},nt.options=b,nt.isDraggable=m(),nt.pageTo=j,nt.hasPrev=R,nt.hasNext=V,nt.pagePrev=N,nt.pageNext=P,nt.loadedPage=M,nt.filter=A,nt.sort=F,nt.reset=S,nt.exportURI=X,nt.findRow=H,nt.selectRow=z,nt.deleteRow=_,nt.selectAllRows=q,nt.editRow=G,nt.cancelEdit=W,nt.ready=Y,nt.bind=k}function et(e){var t,n,a,o,r;e=e||at.page,at.display=at.display||b.display||10,a=at.display,o=Math.ceil(at.filtered.length/a),r=Math.ceil(at.total/a),at.pages=[],F(),b.pager||(at.page=e=1,at.display=a=at.filtered.length),t=e<b.pages?1:Math.ceil(e-b.pages/2),n=t+b.pages,n>o&&(n=o+1,t=n-b.pages),n>r&&(n=r+1,t=n-b.pages),1>t&&(t=1),at.indices={start:t,end:n,filtered:o,max:r},at.pages=g(t,n),I(e)}function tt(){var e,n;v&&(e=[y(b.actionsTemplate),y(b.tableTemplate),y(b.pagerTemplate),y(b.nodataTemplate),y(b.loaderTemplate)],ot={actions:{index:0},table:{index:1},pager:{index:2},nodata:{index:3},loader:{index:4}},w(e),n=r.all(e),J(),Q(),n.then(function(e){var n,a;angular.forEach(ot,function(t){e[t.index]&&(t.template=e[t.index])}),k(function(){var e=!at.filtered||!at.filtered.length||!b.auto&&!Object.keys(b.columns).length;e&&(at.pager=!1,at.actions=!1),-1===at.displayed.indexOf(b.display)&&(at.displayed.push(b.display),at.displayed.sort(function(e,t){return e-t})),F(b.orderBy),et(),a=e?ot.nodata.template:'<div class="ai-table-wrapper ai-table-responsive">'+ot.loader.template+ot.table.template+"</div>",n=ot.actions.template+a+ot.pager.template,n=$(n),v.html(n),l(v.contents())(at),rt=p(".ai-table-loader",t),lt=!0,Z()})}))}var nt,at,ot,rt,it,lt;return nt={},lt=!1,h(v)&&(b=v,v=b.element),at=b.scope||a.$new(),b=at.options=angular.extend(e,b),tt(),nt}var b,y,w,$,x;return y='<div class="ai-table-actions" ng-show="actions"><div class="ai-table-actions-row row row-fluid"><div class="ai-table-actions-filter col-sm-6 span-6"><div class="row row-fluid" ng-show="searchable"><div class="col-sm-8 span-8"><input class="form-control" type="text" placeholder="Search" ng-model="q" ng-change="filter(q)" ng-disabled="editing"/></div><div class="col-sm-4 span-4"><button class="btn btn-warning" type="button"  ng-click="reset()" ng-disabled="editing">Reset</button></div></div></div><div class="ai-table-actions-options col-sm-6 span-6"><div class="row row-fluid form-inline" ng-show="options"><div class="col-sm-3 span-3"><div ng-show="exportable"><button ng-click="exportURI()" class="btn btn-warning">Export to CSV</button></div></div><div class="col-sm-3 span-3"><div ng-show="goto"><input type="text" ng-model="gotoPage" class="form-control goto" placeholder="Goto" ng-keyup="pageToKeyUp($event, gotoPage)" ng-disabled="editing"/>  <button ng-click="pageTo(gotoPage)" class="btn btn-primary" ng-disabled="editing || (gotoPage > indices.max)">Go</button></div></div><div class="col-sm-6 span-6 text-right"><label ng-show="changeable">Displayed</label><select ng-show="changeable" class="form-control" ng-model="display" ng-change="changeDisplay(display)" ng-disabled="editing"><option ng-repeat="d in displayed">{{d}}</option></select><button ng-click="selectAllRows(true)" ng-show="!selectAll && selectable && selectableAll" class="btn btn-primary" ng-model="selectAll" ng-disabled="editing">Select All</button><button style="min-width: 80px;" ng-click="selectAllRows(false)" ng-show="selectAll && selectable && selectableAll" class="btn btn-primary" ng-model="selectAll" ng-disabled="editing">Clear All</button></div></div></div></div></div>',b='<table class="ai-table-table table table-bordered table-striped table-hover table-condensed" ng-class="{ \'ai-table-selectable\': selectable }"><thead><tr><th class="ai-table-header" ng-class="sortClass(column)" ng-repeat="column in columns" ng-click="sort(column)" ng-if="!column.excluded"></th></tr></thead><tbody><tr class="ai-table-row" ng-repeat="row in filtered" ng-click="selectTableRow($event, row, $index)" ng-if="$index >= filteredRows.start && $index < filteredRows.end" ng-class="{ \'ai-table-row-selected\': row.selected,  \'ai-table-row-editing\': row.edits }"><td class="ai-table-cell" ng-if="!column.excluded" ng-repeat="column in columns"></td></tr></tbody></table>',$='<div class="ai-table-pager" ng-show="pager"><div class="ai-table-pager-row row"><div class="ai-table-pager-records col-sm-6"><div ng-show="counts"><span>Page <strong>{{page}}</strong> of <strong>{{indices.filtered}}</strong></span>  -   <span>Filtered (<strong>{{filtered.length}}</strong>)</span>  -   <span>Total (<strong>{{total}}</strong>)</span></div></div><div class="ai-table-pager-pages col-sm-6"><ul class="pagination" ng-show="pagination && indices.filtered > 0"><li ng-class="{ disabled: !hasPrev(page) || editing }"><a ng-click="pagePrev(page)">&laquo;</a></li><li ng-class="{ disabled: page == 1 || editing }" ng-show="firstLast"><a ng-click="pageTo(1)">First</a></li><li ng-class="{ active: pg == page, disabled: editing }" ng-repeat="pg in pages"><a ng-click="pageTo(pg)" ng-bind="pg"></a>                           </li><li ng-class="{ disabled: page == indices.filtered || indices.filtered === 1 || editing }" ng-show="firstLast"><a ng-click="pageTo(indices.filtered)">Last</a></li><li ng-class="{ disabled: !hasNext(page) || indices.filtered ===1 || editing }"><a ng-click="pageNext(page)">&raquo;</a></li></ul></div></div></div>',x='<div class="ai-table-table table table-bordered table-striped table-hover table-condensed"><div class="ai-table-nodata">0 records found in collection or columns not specified.</div></div>',w='<div class="ai-table-loader" ng-show="loading"><div><div>&nbsp;</div></div></div>',i.get(e.actionsTemplate)||i.put(e.actionsTemplate,y),i.get(e.tableTemplate)||i.put(e.tableTemplate,b),i.get(e.pagerTemplate)||i.put(e.pagerTemplate,$),i.get(e.nodataTemplate)||i.put(e.nodataTemplate,x),i.get(e.loaderTemplate)||i.put(e.loaderTemplate,w),v}],{$get:a,$set:o}}]).directive("aiTable",["$table",function(e){return{restrict:"EAC",link:function(t,n,a){function o(){l=e(n,i),l.ready(function(){t.options.instance=i.instance=this})}var r,i,l;r={scope:t},t.$watch(function(){return a.aiTable||a.options},function(e,t){},!0),t.$on("$destroy",function(){n.remove(),l=null,i=null}),i=t.$eval(a.aiTable||a.options),i=angular.extend(r,i),o()}}}]).directive("aiTableHeader",["$compile",function(e){return{restrict:"AEC",link:function(t,n){var a,o;(a=function(){var a=t.column.label,r=t.column.headerClass||null;if(!t.column.excluded&&"$$hashKey"!==t.column.map)return n.html(""),r&&n.addClass(r),(o=angular.isFunction(t.column.accessible)?t.column.accessible:function(){return t.column.accessible})()?void(t.column.header?(n.html(t.column.header),e(n.contents())(t)):(angular.isString(a)&&t.$parent.$parent.uppercase&&(a=a.charAt(0).toUpperCase()+a.slice(1)),n.text(a))):void(t.column.excluded=!0)})()}}}]).directive("aiTableCell",["$compile","$filter","$parse","$q",function(e,t,a,o){function r(e){for(var t,n=e.parentNode;null!==n&&!t;){var a=n;angular.forEach(a.classList,function(e){t||"table"===e&&(t=a)}),n=a.parentNode}return t}return{restrict:"AEC",link:function(i,l){function s(e){return e=e||!1,e?c(C(g)):C(g)}function c(e){return v&&(angular.isFunction(v)?e=v(e,i.column):(v=v.replace(/\s?([|])\s?/,"|").replace(/^\s?|\s?$/g,""),v=v.split("|"),t(v[0])&&(e=t(v[0])(e,v[1])))),e}function u(){return i.viewValue=s(!0),i.modelValue=s(),p=angular.isFunction(f.accessible)?f.accessible:function(){return f.accessible},b&&(y='<div class="ai-table-cell-view" ng-show="!row.edits || !column.editType">'+b+"</div>"),w&&(w='<div class="ai-table-cell-edit" ng-show="row.edits">'+w+"</div>",y+=w),f.editType&&!w&&("select"!==f.editType&&"textarea"!==f.editType?($=$.replace("{{type}}",f.editType),y+=$):("select"===f.editType&&f.editOptions&&(x=x.replace("{{options}}",f.editOptions),y+=x),"textarea"===f.editType&&(y+=k))),p()?(l.html(y),void e(l.contents())(i)):void(f.excluded=!0)}function d(){i.column.excluded||i.column===!1||"$$hashKey"===i.column.map||(l.html(""),l.off(h),m&&l.addClass(m),h&&h.length&&l.on(h,function(e){var t=i.eventMap[e.type];t&&t.callback&&angular.isFunction(t.callback)&&i.$apply(function(){t.callback.call(this,g,i.column,e)})}),f.resolve&&angular.isFunction(f.resolve)?o.when(f.resolve(g,f)).then(function(e){e&&(i.resolvedValue=e),u()}):u())}var p,g=i.row,f=i.column,m=(g[f.map],f.cellClass||f.headerClass||null),h=Object.keys(i.eventMap),v=f.filter,b=f.cellTemplate||n,y='<div class="ai-table-cell-view" ng-show="!row.edits || !column.editType" ng-bind="viewValue"></div>',w=f.editTemplate||n,$='<div class="ai-table-cell-edit" ng-show="row.edits"><input ng-model="modelValue" type="{{type}}" class="form-control" /></div>',x='<div class="ai-table-cell-edit" ng-show="row.edits"><select class="form-control" ng-model="modelValue" ng-options="{{options}}" ></select></div>',k='<div class="ai-table-cell-edit" ng-show="row.edits"><textarea ng-model="modelValue" class="form-control" /></textarea>',C=a(f.map);h=h.join(" "),f.editType=f.editTemplate?"custom":f.editType,i.parent=angular.element(r(l[0])).scope(),i.$watch(function(){return i.row[i.column.map]},function(e,t){e!==t&&(i.editing||(i.viewValue=s(e,!0),angular.isFunction(f.resolve)&&o.when(f.resolve(g,f)).then(function(e){e&&(i.resolvedValue=e)})))}),i.$watch("modelValue",function(e,t){e!==t&&i.editing&&(g.edits[f.map]=e)}),d()}}}]);angular.module("ai.validate",[]).provider("$validate",function(){var e,t,n={elements:["input","textarea","select"],exclude:[],template:'<span class="ai-validate-message">{{message}}</span>',tooltipClass:"animated fadeIn",tooltipAdj:{top:-2.5,left:0},tooltipFallback:"top",prefixes:["ai"],validateOnDirty:!1,validateOnTouched:!0,validateOnSubmit:!0,validateOnDirtyEmpty:!0,pristineOnReset:!0,messageTitlecase:!0,novalidate:!0,onLoad:null,validators:{required:"{{name}} is required.",minlength:"{{name}} must be at least {{value}} characters in length.",maxlength:"{{name}} must not exceed {{value}} characters in length.","ng-required":"{{name}} is required.","ng-minlength":"{{name}} must be at least {{value}} characters in length.","ng-maxlength":"{{name}} must not exceed {{value}} characters in length.",min:"{{name}} must be at least {{value}}.",max:"{{name}} must must not exceed {{value}}.","ng-pattern":"{{name}} must match the pattern {{value}}.",email:"{{name}} must be a valid email address.",tel:"{{name}} must be a valid phone number.",url:"{{name}} must be a valid url web address.",date:"{{name}} must be a valid date.",time:"{{name}} must be a valid time.",datetime:"{{name}} must be a valid date/time value.","ai-compare":"{{name}} must be equal to {{value}} field."}};return t=function(e){angular.extend(n,e)},e=[function(){function e(e){var t={};return e=e||{},e&&e.validators&&(e._validators=e.validators,delete e.validators),e._validators=e._validators||{},t.options=angular.extend(n,e),t}return{elements:n.elements,factory:e}}],{$get:e,$set:t}}).controller("AiValidateFormController",["$scope","$compile","$timeout",function(a,o,r){function i(){if(!v.tooltipEnabled){var e,t;t=a.formElement,e=t[0].querySelectorAll("ai-validate-summary"),e.length||(e=t[0].querySelectorAll("[ai-validate-summary]")),e=e&&e.length?angular.element(e):n,e&&(w=a.options.summaryTemplate||w,w=w.replace(/{{form}}/g,a.formName),v.summaryElement=o(w)(a),e.replaceWith(v.summaryElement))}}function l(e,a){var o;return o=a.querySelectorAll?a.querySelectorAll(e):!o||!o.length&&a[0].querySelectorAll?a[0].querySelectorAll(e):!o||!o.length&&t?t.querySelectorAll(e):n,o?angular.element(o):n}function s(){var e,a=s.width;return a===n&&(e=t.createElement("div"),e.innerHTML='<div style="width:50px;height:50px;position:absolute;left:-50px;top:-50px;overflow:auto;"><div style="width:1px;height:100px;"></div></div>',e=e.firstChild,t.body.appendChild(e),a=s.width=e.offsetWidth-e.clientWidth,t.body.removeChild(e)),a}function c(t,n,o){function r(a){n.removeClass("top"),n.removeClass("right"),n.removeClass("left"),n.removeClass("bottom"),n.css({left:0,top:0}),n.addClass(a);var o,c,u,d,p,g,f;return c={height:n[0].clientHeight,width:n[0].offsetWidth},u={height:t[0].clientHeight,width:t[0].offsetWidth},d={top:t[0].offsetTop,left:t[0].offsetLeft},f=s(),p={width:e.innerWidth-f,height:e.innerHeight},g={},o={top:function(){g.top=d.top-c.height,g.left=d.left+u.width-(c.width/2+u.width/2)+i.left},right:function(){g.top=(u.height-c.height)/2+(d.top+i.top),g.left=d.left+u.width},bottom:function(){g.top=d.top+u.height,g.left=d.left+u.width-(c.width/2+u.width/2)+i.left},left:function(){g.top=(u.height-c.height)/2+(d.top+i.top),g.left=d.left-c.width}},o[a](),g.left<0?l&&"left"!==l?r(l):{top:g.top,left:g.left+Math.abs(g.left)}:g.left+c.width>p.width?l&&"right"!==l?r(l):{top:g.top,left:g.left-Math.abs(g.left+c.width-p.width)}:g.top+c.height>p.height?l&&"bottom"!==l?r(l):{top:g.top-Math.abs(g.top+c.height-p.height),left:g.left}:g.top-c.height<0?l&&"top"!==l?r(l):{top:Math.abs(g.top-c.height),left:g.left}:{top:g.top,left:g.left}}var i,l;a.options.tooltipClass&&n.addClass(a.options.tooltipClass),t.addClass("ai-validate-tooltip"),i=a.options.tooltipAdj||{top:-2.5,left:0},l=a.options.tooltipFallback||null,n.data({input:t,pos:o}),n.css(r(o))}function u(){a.options.validateOnSubmit&&a.formElement.on("submit",function(){a.$apply(function(){a.submitForm()})}),a.options.pristineOnReset&&a.formElement.on("reset",function(){a.$apply(function(){a.resetForm()})})}function d(e){var t=a.options.validators;return t[e]||n}function p(e){return e=e.replace(/([a-z])([A-Z])/g,"$1 $2"),e=e.replace(/\b([A-Z]+)([A-Z])([a-z])/,"$1 $2$3"),e=e.replace(/([A-Z]+)*([A-Z][a-z])/g,"$1 $2"),e.charAt(0).toUpperCase()+e.slice(1)}function g(e){if(!v.submitted){var t=v[e]||null;return t.$modelValue===n?(t.$invalid=!1,t.$valid=!0,t.$setPristine(!0),!1):!0}}function f(e,t,n){var o,r,i;return r=a.options._validators[e],i=a.options.validators[t],r&&(r=r[t]),o=r||i,a.options.messageTitlecase&&(e=p(e)),angular.isFunction(o)&&(o=o({attr:t,value:n},v)),/{{name}}/.test(o)&&(o=o.replace(/{{name}}/g,e||"")),/{{attr}}/.test(o)&&(o=o.replace(/{{attr}}/g,t||"")),/{{value}}/.test(o)&&(o=o.replace(/{{value}}/g,n||"")),o
}function m(e,t,n,o){var r,i,l,s,c,u;return s=a.options.template||b,a.options.prefixes.push("ng"),c=a.options.prefixes.join("|"),u=new RegExp("("+c+")-","gi"),v.tooltipEnabled&&(s=y),l=o?!1:!0,o=o||"{{form}}.{{name}}.$error.{{attr}}",a.options.validateOnDirty&&(o+=a.options.validateOnDirtyEmpty?" && {{form}}.{{name}}.$dirty":' && {{form}}.{{name}}.$dirty && {{form}}.requireValue("'+e+'")'),a.options.validateOnTouched&&(o+=" && {{form}}.{{name}}.$touched"),a.options.validateOnSubmit&&(o+=" || {{form}}.submitted && {{form}}.{{name}}.$error.{{attr}}"),t=t.replace(u,""),r=o.replace(/{{form}}/g,a.formName).replace(/{{name}}/g,e).replace(/{{attr}}/g,t),s=s.replace(/{{message}}/,n),i=angular.element(s).attr("ng-show",r),i.hasClass("ai-validate-message")||i.addClass("ai-validate-message"),l&&a.watchExpression(r,n),i}function h(e,t){var r;if(e.parent()){var i=e.parent();r=i.hasClass("input-group")||i.hasClass("input-prepend")||i.hasClass("input-append")||n}if(v.summaryElement&&t.addClass("ai-summary"),t.hasClass("ai-generated")||t.addClass("ai-generated"),r?e.parent().after(t):e.after(t),t=o(t)(a),v.tooltipEnabled){var l=a.options.template.split(" ").pop()||"top";c(angular.element(e),t,l),v.validationElements.push(t)}}var v,b,y,w,$,x,k;w='<div ai-validate-summary><ul class="ai-validate-summary" ng-show="{{form}}.summary"><li ng-repeat="(expression,message) in {{form}}.validators">{{message}}</li></ul></div>',y='<div class="tooltip"><div class="tooltip-inner">{{message}}</div><div class="tooltip-arrow"></div></div>',b='<span class="ai-validate-message">{{message}}</span>',k=!1,a.findElement=l,a.buildExpression=m,a.init=function(t){if(!k){k=!0,a.reinitForm(!0),v=v||t,v.resetForm=a.resetForm,v.submitForm=a.submitForm,v.reinitForm=a.reinitForm,v.validators={},v.inputElements=[],v.validationElements=[];var o=l(a.options.elements,a.formElement);if(v.inputElements=o=o&&o.length>0?o:[],v.tooltipEnabled=a.options.template&&-1!==a.options.template.indexOf("tooltip"),i(),a.options.validateOnDirtyEmpty||(v.requireValue=g),!o.length)return void(k=!1);u(),angular.forEach(o,function(e){e=angular.element(e);var t,o,r;o=e[0].attributes,r=e[0].type,t=o.name?o.name.value:n,t&&-1===a.options.exclude.indexOf(t)&&(e.hasClass("ai-validate-input")||e.addClass("ai-validate-input"),angular.forEach(o,function(a){var o=a.name||n,r=!1;if("type"===o&&(o=a.value,r=!0),o&&d(o)){var i,l;i=r?f(t,o,n):f(t,o,a.value),l=m(t,o,i),h(e,l,t)}}))}),a.options.onLoad&&a.options.onLoad(v,a),k=!1,v.tooltipEnabled&&(v.positionTooltips=function(){angular.forEach(v.validationElements,function(e){var t=e.data();c(t.input,e,t.pos)})},angular.element(e).bind("resize",function(){v.positionTooltips()}))}},a.watchExpression=function(e,t){a.$watch(function(){return a.$eval(e)},function(n){var o=v.validators.hasOwnProperty(e);!o&&n&&(v.validators[e]=t),o&&!n&&delete v.validators[e],0===Object.keys(v.validators).length?v.summary=!1:(v.submitted&&a.set.dirty(),v.summaryElement&&(v.summary=!0))})},a.set={pristine:function(e){v&&a.formElement&&v.inputElements.length&&(v.summary=!1,v.submitted=!1,angular.forEach(v.inputElements,function(t){t=angular.element(t);var a,o;if(t[0].attributes&&t[0].attributes.name){if(a=t[0].attributes.name.value||n,o=v[a]||n,!a||!o)throw new Error("Form property could not be found or has an invalid name attribute. Cannot set pristine.");if(e)if(angular.isObject(e))if(e[o.$name]){var r=e[o.$name];o.$setViewValue(r),t.val(r)}else o.$setViewValue(n),t.val(n);else o.$setViewValue(n),t.val(n);o.$setPristine(!0),o.$setUntouched(!0),o.$dirty=!1,t.addClass("ng-pristine").removeClass("ng-dirty")}}),r(function(){v.$dirty=!1,v.$setPristine(!0),v.$setUntouched(!0),v.submitted=!1,$=!1}))},dirty:function(){v&&a.formElement&&v.inputElements.length&&(angular.forEach(v.inputElements,function(e){e=angular.element(e);var t,a;if(e[0].attributes&&e[0].attributes.name){if(t=e[0].attributes.name.value||n,a=v[t]||n,!t||!a)throw new Error("Form property could not be found or has an invalid name attribute. Cannot set pristine.");a.$setPristine(!1),a.$dirty=!0,e.removeClass("ng-pristine").addClass("ng-dirty")}}),v.$pristine=!1,v.$setUntouched(!1),v.$setDirty(!0),x=!1)}},a.resetForm=function(e){e=e||!1,$||($=!0,a.set.pristine(e))},a.submitForm=function(e){x||(x=!0,v.submitted=!0,e===!0&&a.formElement.submitForm(),a.set.dirty())},a.destroyForm=function(){a.removeValidations(),delete a.formName,delete a.formElement,delete v.validators,delete v.inputElements,delete v.validationElements},a.removeValidations=function(e){e=e||l(".ai-validate-message.ai-generated",a.formElement[0]),e&&e.length&&e.remove()},a.reinitForm=function(e){e=e||!1,a.removeValidations(),v&&(v.validators={},v.inputElements=[],v.validationElements=[]),e||a.init()}}]).directive("aiValidateForm",["$validate",function(e){var t,a;return t=e.elements,a=e.factory,angular.isArray(t)&&(t=t.join(",")),{restrict:"AC",controller:"AiValidateFormController",compile:function(e){var o=e[0].querySelectorAll(t);return o&&o.length&&angular.forEach(o,function(e){e=angular.element(e);var t,a,o=e[0].attributes;o.name||(a=o["ng-model"]||o["data-ng-model"]||n,t=a?a.value.split(".").pop():null,t&&e.attr("name",t))}),function(e,o,r){var i,l,s,c;if(l=o.attr("name")||null,!l)throw new Error('Form name is invalid or missing. Please use name="some_value" to name your form.');if(i=e[l]||n,!i)throw new Error("Scope does not contain the requested form.");e.formElement=o,e.formName=l,e.parentScope=e.$parent,s=r.aiValidateForm||r.options,c=a(e.$eval(s)),e.options=c.options,e.options.elements=t,e.options.novalidate&&o.attr("novalidate",""),e.$watch(function(){return r.aiValidateForm||r.options},function(t,n){t!==n&&(e.options=angular.extend(e.options,t))},!0),e.init(i)}}}}]).directive("aiValidateMessage",[function(){return{restrict:"EAC",require:"?aiValidateForm",link:function(e,n,a){var o;a.ngShow&&(a.aiValidateMessage&&(o=e.findElement('[name="'+a.aiValidateMessage+'"]',t),o&&o.addClass("ai-validate-input")),n.hasClass("ai-validate-message")||n.addClass("ai-validate-message"),e.watchExpression(a.ngShow,n.text()),e.$watch(function(){var t=e[e.formName];return t.summaryElement},function(e){e?n.addClass("ai-summary"):n.removeClass("ai-summary")}))}}}]);angular.module("ai.viewer",[]).provider("$viewer",function(){var e,n,a={template:'<div class="ai-viewer" ng-view />',viewCss:"ai-viewer-view",animate:"slide"};return n=function(e){a=angular.extend(a,e)},e=["$rootScope","$compile","$location",function(e,n,o){function r(r,s){var c,u,d={};return u=s.scope||e.$new(),s=u.options=angular.extend(a,s),c=angular.element(s.template),c.addClass(s.viewCss),u.options.animate&&c.attr("ng-class","state"),c=n(c)(u),r.append(c),d.getView=function(){return angular.element(t.querySelectorAll("."+s.viewCss)[0])},d.getState=function(){return i},d.forward=function(e){o.path(e)},d.backward=function(e){l.push(e),o.path(e)},d}var i,l=[],s=!1;return e.$on("$routeChangeStart",function(e,t,n){var a=l.slice(0).pop(),o=t.$$route.originalPath;n=n||{$$route:"/"},s?o===a?(i="back",l.pop()):(i="forward",l.push(n.$$route.originalPath)):s=!0}),r}],{$get:e,$set:n}}).directive("aiViewer",["$rootScope","$viewer",function(e,t){return{restrict:"EA",link:function(n,a){function o(){l=t(a,i),e.$on("$routeChangeSuccess",function(){var e=l.getState(),t=l.getView();e&&n.options.animate&&t&&t.removeClass("forward"===e?"back":"forward").addClass(e),n.state=e})}var r,i,l;r={scope:n},i=attrs.aiViewer||attrs.options,i=angular.extend(r,n.$eval(i)),o()}}}]),angular.module("ai.widget",[]).provider("$widget",function(){var e,t,a={nicescroll:{horizrailenabled:!1},decimal:{places:2},redactor:{focus:!0,plugins:["fullscreen"]},"case":{casing:"first",event:"blur"},compare:{compareTo:n,requireValue:!0,dataType:"string",precision:"minutes"}};return t=function(e,t){angular.isObject(e)?(t=e,e=n,a=angular.extend(a,t)):a[e]=angular.extend(a[e],t)},e=[function(){function e(e,t){return t=t||{},a[e]?t=angular.extend(a[e],t):t}return e}],{$get:e,$set:t}}).directive("aiPrevent",[function(){return{restrict:"AC",link:function(e,t,n){n.ngClick&&t.on("click",function(e){e.preventDefault()})}}}]).directive("aiNicescroll",["$widget","$timeout",function(t,n){return{restrict:"AC",link:function(a,o,r){function i(){n(function(){c=o.niceScroll(s)},0)}var l,s,c;console.assert(e.NiceScroll,"ai-nicescroll requires the NiceScroll library see: http://areaaperta.com/nicescroll"),l=angular.copy(t("nicescroll")),s=r.aiNicescroll||r.options,s=angular.extend(l,a.$eval(s)),i()}}}]).directive("aiDecimal",["$widget",function(e){return{restrict:"AC",require:"?ngModel",link:function(t,a,o,r){function i(){a.unbind("blur"),a.on("blur",function(e){t.$apply(function(){c(e.target.value)})}),c()}var l,s,c,u,d;l=angular.copy(e("decimal")),d=new RegExp("^[0-9]+.d{2}$"),u=!1,c=function(e){e===n||d.test(e)||(e=parseFloat(e).toFixed(s.places),a.val(e),r.$setViewValue(e))},t.$watch(o.ngModel,function(e){e===n&&(u=!1),e===n||d.test(e)||u||(c(e),u=!0)}),s=o.aiDecimal||o.options,s=angular.extend(l,t.$eval(s)),i()}}}]).directive("aiRedactor",["$widget",function(t){return{restrict:"AC",scope:!0,require:"?ngModel",link:function(n,a,o){function r(){s=a.redactor(l)}var i,l,s;i=angular.copy(t("redactor")),console.assert(e.jQuery&&"undefined"!=typeof $.fn.redactor,"ai-redactor requires the jQuery redactor plugin. see: http://imperavi.com/redactor."),l=o.aiRedactor||o.options,l=angular.extend(i,n.$eval(l)),r()}}}]).directive("aiCase",["$timeout","$widget",function(e,t){return{restrict:"AC",require:"?ngModel",link:function(n,a,o,r){function i(e){return e?"title"===d?e.replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()}):"first"===d?e.charAt(0).toUpperCase()+e.slice(1):"camel"===d?e.toLowerCase().replace(/-(.)/g,function(e,t){return t.toUpperCase()}):"pascal"===d?e.replace(/\w+/g,function(e){return e[0].toUpperCase()+e.slice(1).toLowerCase()}):"lower"===d?e.toLowerCase():"upper"===d?e.toUpperCase():e:void 0}function l(){n.$apply(function(){var e=a.val(),t=i(e);r?r.$modelValue=t:a.val(i(e))})}function s(){d=u.casing,a.on(u.event,function(e){l(e)}),a.on("keyup",function(e){var t=e.which||e.keyCode;13===t&&(e.preventDefault(),l(e))}),e(function(){l()},100)}var c,u,d;c=angular.copy(t("case")),u={};var p=o.aiCase||o.options;angular.isString(p)&&(u.casing=p),angular.isObject(p)&&(u=n.$eval(p)),u=angular.extend(c,u),s()}}}]).directive("aiCompare",["$widget",function(e){function t(){try{{moment()}return!0}catch(e){return!1}}function n(e){return!isNaN(parseInt(e,10))&&parseFloat(e,10)===parseInt(e,10)}return{restrict:"AC",require:"^ngModel",link:function(a,o,r,i){function l(e){var t;if(!f.$viewValue||!i.$viewValue&&u.requireValue)t=!1;else if("string"===u.dataType)t=f.$viewValue===e;else if("integer"===u.dataType)t=n(f.$viewValue)&&n(i.$viewValue)?parseInt(f.$viewValue)===parseInt(e):!1;else if(/^(date|time|datetime)$/.test(u.dataType)){var a,o,r,l;a=f.$viewValue,o=i.$viewValue,"time"===u.dataType&&(a="01/01/1970 "+a,o="01/01/1970 "+o),a=moment(a),o=moment(o),"date"===u.dataType?(r=o.diff(a,"days"),t=0===r):"time"===u.dataType?(r=o.diff(a,u.precision),t=0===r):"datetime"===u.dataType?(r=o.diff(a,"days"),l=o.diff(a,u.precision),t=0===r&&0===l):t=!1}else t=!1;return i.$setValidity("compare",t),t}function s(){if(d=o[0].form,d&&(p=a[d.name],f=p[u.compareTo]||u.compareTo,p&&u.compareTo&&f)){if(/^(date|time|datetime)$/.test(u.dataType)&&!g)return console.warn("ai-compare requires moment.js, see http://momentjs.com/.");i.$formatters.unshift(l),i.$parsers.unshift(l)}}var c,u,d,p,g,f;g=t(),c=angular.copy(e("compare"));var m=r.aiCompare||r.options;m=angular.isString(m)&&-1===m.indexOf("{")?{compareTo:m}:a.$eval(m),u=angular.extend({},c,m),s()}}}]).directive("aiPlaceholder",["$widget",function(){function e(e,t){try{var n,a=e.parent();return angular.forEach(a.children(),function(e,a){var o=angular.element(e),r=o.attr("_ts_");t.toString()===r&&(n=a-1)}),e.removeAttr("_ts_"),0>n?{element:angular.element(e.parent()),method:"prepend"}:{element:angular.element(a.children().eq(n)),method:"after"}}catch(o){return!1}}function n(e){return e.charAt(0).toUpperCase()+e.slice(1)}function a(){var e=t.createElement("input");return"placeholder"in e}return{restrict:"AC",link:function(t,o,r){function i(){var t,r="<label>{{NAME}}</label>",i=(new Date).getTime();o.attr("_ts_",i),t=e(o,i),-1!==l.indexOf(".")&&(l=l.split("."),l=l[1]?l[1]:l[0]),l=n(l),!a()&&t&&(r=r.replace("{{NAME}}",l),r=angular.element(r),t.element[t.method](r))}var l;l=o.attr("placeholder")||r.aiPlaceholder||r.ngModel,i()}}}])}(window,document);