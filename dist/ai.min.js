!function(){"use strict";angular.module("ai",["ai.click2call","ai.storage","ai.nicescroll"]),angular.module("ai.click2call",[]).provider("$click2call",function(){var e,t,r,n;return e={gvid:void 0,template:"ai-click2call",message:"O.K we're calling to connect you! Be just a sec..."},n='<form name="c2cForm" class="ai-click2call" novalidate ng-submit="call(c2cForm, model)"><div class="form-group"><input class="form-control" name="name" type="text" ng-model="model.name" placeholder="Name (optional)" /></div><div class="form-group"><input class="form-control" name="number" type="text" ng-model="model.number" placeholder="Number (7605551212)" required/><span class="ai-click2call-error" ng-show="c2cForm.name.$error.required || (c2cForm.$dirty && c2cForm.$invalid)">Your number is required.</span></div><p><button class="btn btn-primary btn-block" type="submit">Call Now</button></p><p class="ai-click2call-message" ng-show="model.calling" ng-bind="model.message"></p></form>',r=function(t){e=angular.extend(e,t)},t=["$rootScope","$templateCache","$http","$q","$compile",function(t,r,o,a,l){function i(r,n){function o(e,t,r){var n,o,a,l=document.createElement("iframe");if(l.style.width=0,l.style.height=0,l.style.border=0,document.body.appendChild(l),l.contentDocument?n=l.contentDocument:l.contentWindow?n=l.contentWindow.document:l.document&&(n=l.document),null===n)throw new Error("Document not initialized");n.open(),n.write(""),n.close(),o=n.createElement("form"),o.method="post",o.action="https://clients4.google.com/voice/embed/webButtonConnect",a=n.createElement("input"),a.type="text",a.name="buttonId",a.value=""+e,o.appendChild(a),a=n.createElement("input"),a.type="text",a.name="callerNumber",a.value=""+t,o.appendChild(a),a=n.createElement("input"),a.type="text",a.name="name",a.value=""+r,o.appendChild(a),a=n.createElement("input"),a.type="text",a.name="showCallerNumber",a.value="1",o.appendChild(a),n.body.appendChild(o),o.submit()}var a={},i=a.$options=angular.extend({},e,n),u=a.$scope=i.scope?i.scope.$new():t.$new();return u.model={message:i.message},u.call=a.call=function(e,t){if(!t||!t.number)return alert("Oops you forgot your number!");if(e.$valid){if(t.number=t.number.replace(/\D/g,""),t.calling=!0,t.number.length<10)return alert("Oops that doesn't look like enough numbers.");"1"!==t.number.charAt(0)&&(t.number="1"+t.number),o(i.gvid,t.number,t.name||"Unknown")}},c.fetch(i.template).then(function(e){e=l(e)(u),r.append(e)}),a}var c={find:function(e,t){return angular.element((t||document).querySelectorAll(e))},fetch:function(e){return a.when(r.get(e)||o.get(e)).then(function(t){return angular.isObject(t)?(r.put(e,t.data),t.data):t})},isHtml:function(e){var t="<(br|basefont|hr|input|source|frame|param|area|meta|!--|col|link|option|base|img|wbr|!DOCTYPE).*?>|<(a|abbr|acronym|address|applet|article|aside|audio|b|bdi|bdo|big|blockquote|body|button|canvas|caption|center|cite|code|colgroup|command|datalist|dd|del|details|dfn|dialog|dir|div|dl|dt|em|embed|fieldset|figcaption|figure|font|footer|form|frameset|head|header|hgroup|h1|h2|h3|h4|h5|h6|html|i|iframe|ins|kbd|keygen|label|legend|li|map|mark|menu|meter|nav|noframes|noscript|object|ol|optgroup|output|p|pre|progress|q|rp|rt|ruby|s|samp|script|section|select|small|span|strike|strong|style|sub|summary|sup|table|tbody|td|textarea|tfoot|th|thead|time|title|tr|track|tt|u|ul|var|video).*?</2>",r=new RegExp(t);return r.test(e)},isPath:function(e){var t=e.split(".").pop();return"html"===t||"tpl"===t}};return e.template&&(r.get(e.template)||r.put(e.template,n)),i}],{$set:r,$get:t}}).directive("aiClick2call",["$click2call",function(e){return{restrict:"EAC",scope:{options:"&aiClick2call"},link:function(t,r){var n,o,a,l;n={scope:t},a=function(){o=e(r,l)},l=angular.extend(n,t.$eval(t.options)),a()}}}]),angular.module("ai.nicescroll",[]).directive("aiNicescroll",[function(){return{restrict:"EAC",scope:{options:"&aiNicescroll"},link:function(e,t){var r,n,o;console.assert(window.NiceScroll,"ai-nicescroll requires the NiceScroll library see: http://areaaperta.com/nicescroll/"),r={horizrailenabled:!1},n=function(){o=t.niceScroll(e.options)},e.options=angular.extend(r,e.$eval(e.options)),n()}}}]),angular.module("ai.storage",[]).provider("$storage",function(){function e(e){return e?navigator.cookieEnabled||"cookie"in document&&(document.cookie.length>0||(document.cookie="test").indexOf.call(document.cookie,"test")>-1):"localStorage"in window&&null!==window.localStorage}function t(e,r,n,o){if(!r)return n;n=n||null,o=o||0;var a=r.length;for(var l in e)if(e.hasOwnProperty(l)&&l===r[o])return a-1>o&&angular.isObject(e[l])?(o+=1,t(e[l],r,n,o)||n):e[l]||n;return n}var r,n,o={ns:"app",cookiePath:"/",cookieExpiry:30};return n=function(e){o=angular.extend(o,e)},r=[function(){function r(r){function n(){if(!v)return new Error("Keys can only be obtained when localStorage is available.");var e=[];for(var t in localStorage)if(localStorage.hasOwnProperty(t)&&t.substr(0,b)===g)try{e.push(t.substr(b))}catch(r){return r}return e}function a(e,t){if(!v)return s(e,t);void 0===typeof t&&(t=null);try{(angular.isObject(t)||angular.isArray(t))&&(t=angular.toJson(t)),localStorage.setItem(g+e,t)}catch(r){return s(e,t)}}function l(e,t){var r;return t?i(e,t):v?(r=localStorage.getItem(g+e),r?"{"===r.charAt(0)||"["===r.charAt(0)?angular.fromJson(r):r:null):m(e)}function i(e,r){var n,o;return v?(n=l(e),o=angular.isObject(n)||!1,n?o?t(n,r):n:new Error("Invalid operation, storage item must be an object.")):new Error("Cannot get by property, localStorage must be enabled.")}function c(e){if(!v)return p(e);try{localStorage.removeItem(g+e)}catch(t){return p(e)}}function u(){if(!v)return d();for(var e in localStorage)if(localStorage.hasOwnProperty(e)&&e.substr(0,b)===g)try{c(e.substr(b))}catch(t){return d()}}function s(e,t){if(void 0===typeof t)return!1;if(!h)return new Error("Cookies are not supported by this browser.");try{var n="",o=new Date;null===t&&(f.expiry=-1,t=""),f.expiry&&(o.setTime(o.getTime()+24*r.cookieExpiry*60*60*1e3),n="; expires="+o.toGMTString()),e&&(document.cookie=g+e+"="+encodeURIComponent(t)+n+"; path="+r.cookiePath)}catch(a){throw a}}function m(e){if(!h)return new Error("Cookies are not supported by this browser.");for(var t=document.cookie.split(";"),r=0;r<t.length;r++){for(var n=t[r];" "===n.charAt(0);)n=n.substring(1,n.length);if(0===n.indexOf(g+e+"="))return decodeURIComponent(n.substring(g.length+e.length+1,n.length))}return null}function p(e){s(e,null)}function d(){for(var e,t=null,r=document.cookie.split(";"),n=0;n<r.length;n++){for(t=r[n];" "===t.charAt(0);)t=t.substring(1,t.length);return e=t.substring(b,t.indexOf("=")),p(e)}}var g,f,b,h,v,y={};return r=angular.extend(o,r),g=r.ns+".",b=g.length,v=e(),h=e(!0),v||h?(y.supports={localStorage:e(),cookies:e(!0)},y.get=l,y.set=a,y.delete=c,y.clear=u,y.storage={keys:n,supported:v},y.cookie={get:m,set:s,"delete":p,clear:d,supported:h},y):new Error("Storage Factory requires localStorage browser support or cookies must be enabled.")}return r}],{$set:n,$get:r}})}();